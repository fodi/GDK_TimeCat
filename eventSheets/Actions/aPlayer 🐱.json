{
	"name": "aPlayer üê±",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "Main player actions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"aceType": "action",
					"aceName": "spawn",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "playerId",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 239190733849133
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Spawn a player if the game is still running"
						}
					],
					"sid": 487543100358628,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 650264510073668,
									"parameters": {
										"variable": "hasLevelEnded",
										"comparison": 0,
										"value": "NO"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 933293394355053,
									"parameters": {
										"variable": "playerCount",
										"value": "1"
									}
								},
								{
									"callFunction": "playSoundAt",
									"sid": 542440971123499,
									"parameters": [
										"Player.X",
										"Player.Y",
										"SFX_Player_Spawning",
										"1",
										"NO"
									]
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 531431080367747,
									"parameters": {
										"object-to-create": "Player",
										"layer": "LAYER_Shadows",
										"x": "midX",
										"y": "midY",
										"create-hierarchy": true,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 262098553697174,
									"parameters": {
										"instance-variable": "playerId",
										"value": "playerId"
									}
								},
								{
									"type": "comment",
									"text": "Apply rules"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 921658259330035,
									"parameters": {
										"instance-variable": "R_Health_Start",
										"value": "Functions.Rules_getNumber(PARAM_Player_Health)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 100231028186690,
									"parameters": {
										"instance-variable": "health",
										"value": "Self.R_Health_Start"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 264253102479519,
									"parameters": {
										"instance-variable": "R_Health_BonusOnPair",
										"value": "Functions.Rules_getNumber(PARAM_Player_Heal_Pair)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 467471551709186,
									"parameters": {
										"instance-variable": "R_Health_BonusOnHeal",
										"value": "Functions.Rules_getNumber(PARAM_Player_Heal_Item)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 490795877766781,
									"parameters": {
										"instance-variable": "R_MovementSpeed_Normal",
										"value": "Functions.Rules_getNumber(PARAM_Player_MovementSpeed)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 152717991793070,
									"parameters": {
										"instance-variable": "R_MovementSpeed_Slow",
										"value": "Functions.Rules_getNumber(PARAM_Player_MovementSpeed_Slow)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 640528475662065,
									"parameters": {
										"instance-variable": "R_Item_MovementSpeed",
										"value": "Functions.Rules_getNumber(PARAM_Item_Speed)"
									}
								},
								{
									"id": "set-max-speed",
									"objectClass": "Player",
									"sid": 502341442205300,
									"behaviorType": "8Direction",
									"parameters": {
										"max-speed": "Self.R_MovementSpeed_Normal"
									}
								},
								{
									"type": "comment",
									"text": "Initialize "
								},
								{
									"id": "set-solid-collision-filter",
									"objectClass": "Player",
									"sid": 270102040153958,
									"parameters": {
										"mode": "exclusive",
										"tags": "SOLID_Item"
									}
								},
								{
									"type": "comment",
									"text": "todo set color previously in lobby"
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 725382807756150,
									"parameters": {
										"instance-variable": "colorName",
										"value": "trim(tokenat(C_CSV_Colors_Name, Self.playerId, \",\"))"
									}
								}
							],
							"sid": 460520553576043,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 718274796982839,
											"parameters": {
												"child": "bbPlayer",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "bbPlayer",
											"sid": 609745530929794,
											"parameters": {
												"instance-variable": "playerId",
												"value": "Player.playerId"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "bbPlayer",
											"sid": 588026345869491,
											"parameters": {
												"instance-variable": "colorName",
												"value": "Player.colorName"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "bbPlayer",
											"sid": 660404312847286,
											"parameters": {
												"instance-variable": "initAnimationSpeed",
												"value": "Self.AnimationSpeed"
											}
										}
									],
									"sid": 273664776016531
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 194808628058926,
											"parameters": {
												"child": "bbAlert",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "bbAlert",
											"sid": 626602439471769,
											"parameters": {
												"animation": "str(Player.playerId)",
												"from": "beginning"
											}
										}
									],
									"sid": 394852947208366
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 789679984872578,
											"parameters": {
												"child": "PlayerAim",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "PlayerAim",
											"sid": 964245335796635,
											"parameters": {
												"instance-variable": "initWidth",
												"value": "Self.Width"
											}
										},
										{
											"id": "set-width",
											"objectClass": "PlayerAim",
											"sid": 187626896454205,
											"parameters": {
												"width": "0"
											}
										},
										{
											"id": "move-to-layer",
											"objectClass": "PlayerAim",
											"sid": 519729281310809,
											"parameters": {
												"layer": "LAYER_Lights"
											}
										}
									],
									"sid": 264015851247583
								}
							]
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "tick",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Update the player if level hasn't ended and game is not paused:\n- Movement (with damage)\n- Aiming\n- Update time UI"
						}
					],
					"sid": 310416267507355,
					"children": [
						{
							"eventType": "comment",
							"text": "If level hasn't ended and game is not paused..."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 204106711194964,
									"parameters": {
										"variable": "hasLevelEnded",
										"comparison": 0,
										"value": "NO"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 102402555565803,
									"parameters": {
										"variable": "isPaused",
										"comparison": 0,
										"value": "NO"
									}
								}
							],
							"actions": [],
							"sid": 719110693557830,
							"children": [
								{
									"eventType": "comment",
									"text": "If player is not dead and not sleeping..."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 605920722915304,
											"parameters": {
												"instance-variable": "isDead",
												"comparison": 0,
												"value": "NO"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 255814666635847,
											"parameters": {
												"child": "bbPlayer",
												"which": "own"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 993033183176839,
											"parameters": {
												"child": "PlayerAim",
												"which": "own"
											}
										},
										{
											"id": "is-timer-running",
											"objectClass": "Player",
											"sid": 681800252111957,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "TIMER_Player_Sleep"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 558099310617014,
									"children": [
										{
											"eventType": "comment",
											"text": "Handle digital movement"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 182449715122524,
													"parameters": {
														"instance-variable": "IN_Up",
														"comparison": 0,
														"value": "YES"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 900349221854944,
													"parameters": {
														"instance-variable": "IN_Down",
														"comparison": 0,
														"value": "YES"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 859201080829638,
													"parameters": {
														"instance-variable": "IN_Left",
														"comparison": 0,
														"value": "YES"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 447339224419511,
													"parameters": {
														"instance-variable": "IN_Right",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Player",
													"sid": 694503501329367,
													"parameters": {
														"instance-variable": "IN_Move",
														"value": "YES"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "Player",
													"sid": 126962459447738,
													"parameters": {
														"instance-variable": "IN_Move_Angle",
														"value": "angle(0, 0, Player.IN_Right - Player.IN_Left, Player.IN_Down - Player.IN_Up)"
													}
												}
											],
											"sid": 201447142053360,
											"isOrBlock": true
										},
										{
											"eventType": "comment",
											"text": "todo fix bug when pressing keyboard aim button sets angle of player even if no angle is specified using keys (regression due to mouse aim)"
										},
										{
											"eventType": "comment",
											"text": "todo IN_Mouse, use \"mouse moved\" timer to keep it \"active\""
										},
										{
											"eventType": "comment",
											"text": "Update player's current angle variable if player is moving or aiming (otherwise, keep last value)"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 607196889737435,
													"parameters": {
														"instance-variable": "IN_Move",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Player",
													"sid": 752559439637640,
													"parameters": {
														"instance-variable": "currentAngle",
														"value": "Player.IN_Move_Angle"
													}
												}
											],
											"sid": 365700790090173
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 322035597420403
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 888119817208650,
													"parameters": {
														"instance-variable": "IN_Aim",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Player",
													"sid": 605378587043854,
													"parameters": {
														"instance-variable": "currentAngle",
														"value": "Player.IN_Aim_Angle"
													}
												}
											],
											"sid": 316270642012577
										},
										{
											"eventType": "comment",
											"text": "Switch animation according to player aim/movement angle"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-between-angles",
													"objectClass": "System",
													"sid": 881393660219419,
													"parameters": {
														"angle": "Player.currentAngle",
														"first-angle": "-60",
														"second-angle": "60"
													}
												}
											],
											"actions": [
												{
													"customAction": "updateAnimation",
													"objectClass": "Player",
													"sid": 433386441470360,
													"parameters": [
														"ANIM_Player_Right"
													]
												}
											],
											"sid": 214498997253340
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 136393294772962
												},
												{
													"id": "is-between-angles",
													"objectClass": "System",
													"sid": 410875555289899,
													"parameters": {
														"angle": "Player.currentAngle",
														"first-angle": "120",
														"second-angle": "240"
													}
												}
											],
											"actions": [
												{
													"customAction": "updateAnimation",
													"objectClass": "Player",
													"sid": 955619481031936,
													"parameters": [
														"ANIM_Player_Left"
													]
												}
											],
											"sid": 212842649856025
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 242435580425710
												},
												{
													"id": "is-between-angles",
													"objectClass": "System",
													"sid": 950974436902899,
													"parameters": {
														"angle": "Player.currentAngle",
														"first-angle": "240",
														"second-angle": "300"
													}
												}
											],
											"actions": [
												{
													"customAction": "updateAnimation",
													"objectClass": "Player",
													"sid": 820554339447990,
													"parameters": [
														"ANIM_Player_Up"
													]
												}
											],
											"sid": 527673033836791
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 795528967056735
												},
												{
													"id": "is-between-angles",
													"objectClass": "System",
													"sid": 158101703203901,
													"parameters": {
														"angle": "Player.currentAngle",
														"first-angle": "60",
														"second-angle": "120"
													}
												}
											],
											"actions": [
												{
													"customAction": "updateAnimation",
													"objectClass": "Player",
													"sid": 290223706015107,
													"parameters": [
														"ANIM_Player_Down"
													]
												}
											],
											"sid": 479539183854456
										},
										{
											"eventType": "comment",
											"text": "Do movement if needed"
										},
										{
											"eventType": "variable",
											"name": "movementSpeed",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 400941946933610
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 228972731839248,
													"parameters": {
														"instance-variable": "IN_Move",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [],
											"sid": 563422491768873,
											"children": [
												{
													"eventType": "comment",
													"text": "Calculate movement speed: normal / carrying + additional slow effect if needed"
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 332112742112114,
															"parameters": {
																"variable": "movementSpeed",
																"value": "Player.carryingItemUID = NOTHING ? Player.R_MovementSpeed_Normal : Player.R_MovementSpeed_Slow"
															}
														}
													],
													"sid": 929084884302917
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-timer-running",
															"objectClass": "Player",
															"sid": 708891670620313,
															"behaviorType": "Timer",
															"parameters": {
																"tag": "TIMER_Player_Slow"
															}
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 836799562752153,
															"parameters": {
																"variable": "movementSpeed",
																"value": "movementSpeed * Functions.Rules_getNumber(PARAM_Item_Slow_Factor)"
															}
														}
													],
													"sid": 252302411691559
												},
												{
													"eventType": "comment",
													"text": "If player is aiming, set movement speed to 0"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 928884660003694,
															"parameters": {
																"instance-variable": "IN_Aim",
																"comparison": 0,
																"value": "YES"
															}
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 521634830047341,
															"parameters": {
																"variable": "movementSpeed",
																"value": "0"
															}
														}
													],
													"sid": 896517506726202
												},
												{
													"eventType": "comment",
													"text": "Move player and damage them with dt"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 994373930537493,
															"parameters": {
																"variable": "movementSpeed",
																"comparison": 1,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"customAction": "changeHealth",
															"objectClass": "Player",
															"sid": 325630633691957,
															"parameters": [
																"-dt * Functions.Rules_getNumber(PARAM_Player_Health_Drain)",
																"NO",
																"NO"
															]
														},
														{
															"id": "set-vector-x",
															"objectClass": "Player",
															"sid": 912822518074690,
															"behaviorType": "8Direction",
															"parameters": {
																"vector-x": "cos(Player.IN_Move_Angle) * movementSpeed"
															}
														},
														{
															"id": "set-vector-y",
															"objectClass": "Player",
															"sid": 801796081300637,
															"behaviorType": "8Direction",
															"parameters": {
																"vector-y": "sin(Player.IN_Move_Angle) * movementSpeed"
															}
														}
													],
													"sid": 486821714890549
												},
												{
													"eventType": "comment",
													"text": "If player is not carrying an item, use normal animation speed"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 349793682872701,
															"parameters": {
																"instance-variable": "carryingItemUID",
																"comparison": 0,
																"value": "NOTHING"
															}
														}
													],
													"actions": [
														{
															"id": "set-animation-speed",
															"objectClass": "bbPlayer",
															"sid": 643601173500871,
															"parameters": {
																"speed": "Self.initAnimationSpeed"
															}
														}
													],
													"sid": 435379465909212
												},
												{
													"eventType": "comment",
													"text": "If player is carrying an item, use slowed down animation speed"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 742717581130595
														}
													],
													"actions": [
														{
															"id": "set-animation-speed",
															"objectClass": "bbPlayer",
															"sid": 420791575929818,
															"parameters": {
																"speed": "Self.initAnimationSpeed * (Player.R_MovementSpeed_Slow / Player.R_MovementSpeed_Normal)"
															}
														}
													],
													"sid": 862177817622242
												}
											]
										},
										{
											"eventType": "comment",
											"text": "If player is not moving, stop & switch to standing frame"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 879811021856323,
													"parameters": {
														"variable": "movementSpeed",
														"comparison": 0,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "stop",
													"objectClass": "Player",
													"sid": 606435243430195,
													"behaviorType": "8Direction"
												},
												{
													"id": "set-animation-frame",
													"objectClass": "bbPlayer",
													"sid": 367602872033897,
													"parameters": {
														"frame-number": "FRAME_Avatar_Standing"
													}
												}
											],
											"sid": 435187683592693
										},
										{
											"eventType": "comment",
											"text": "If player has an item, update it's position & angle"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-children",
													"objectClass": "Player",
													"sid": 370377093193452,
													"parameters": {
														"child": "Item",
														"which": "own"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Item",
													"sid": 105402288466393,
													"parameters": {
														"instance-variable": "isDestroyed",
														"comparison": 0,
														"value": "NO"
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "Item",
													"sid": 364974756464331,
													"parameters": {
														"x": "Player.X + cos(anglelerp(angle(Player.X, Player.Y, Self.X, Self.Y), Player.currentAngle, 0.2)) * Player.R_Item_Carry_Distance",
														"y": "Player.Y + sin(anglelerp(angle(Player.X, Player.Y, Self.X, Self.Y), Player.currentAngle, 0.2)) * Player.R_Item_Carry_Distance"
													}
												},
												{
													"id": "set-angle",
													"objectClass": "Item",
													"sid": 557566302175488,
													"parameters": {
														"angle": "anglelerp(Self.Angle, Player.currentAngle, 0.2)"
													}
												},
												{
													"id": "set-width",
													"objectClass": "PlayerAim",
													"sid": 920229606220663,
													"parameters": {
														"width": "Self.initWidth"
													}
												},
												{
													"id": "set-angle",
													"objectClass": "PlayerAim",
													"sid": 569125568641609,
													"parameters": {
														"angle": "anglelerp(Self.Angle, Player.currentAngle, 0.5)"
													}
												}
											],
											"sid": 382830906295960
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 703153665448243
												}
											],
											"actions": [
												{
													"id": "set-width",
													"objectClass": "PlayerAim",
													"sid": 389289685749250,
													"parameters": {
														"width": "0"
													}
												}
											],
											"sid": 494810456146479
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Update time UI for player"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "UI_TextSF",
											"sid": 794333759886740,
											"parameters": {
												"instance-variable": "role",
												"comparison": 0,
												"value": "ROLE_PlayerHealth"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "UI_TextSF",
											"sid": 948589958176988,
											"parameters": {
												"instance-variable": "paramNumber",
												"comparison": 0,
												"value": "Player.playerId"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "UI_TextSF",
											"sid": 875403342173894,
											"parameters": {
												"text": "\"[color=#\" & trim(tokenat(C_CSV_Colors_Hex, Player.playerId, \",\")) & \"][scale=0.4]TIME[/scale]\" & newline & int(Player.health)"
											}
										}
									],
									"sid": 305811930777222
								}
							]
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "onAction",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "playerId",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 259019913465708
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Do player actions if the level hasn't ended and game is not paused:\n- Join\n- Open tiles\n- Attack"
						}
					],
					"sid": 684002622893754,
					"children": [
						{
							"eventType": "comment",
							"text": "todo: on join, select color first, then spawn player"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 354704168553047,
									"parameters": {
										"variable": "hasLevelEnded",
										"comparison": 0,
										"value": "NO"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 696067421808857,
									"parameters": {
										"variable": "isPaused",
										"comparison": 0,
										"value": "NO"
									}
								}
							],
							"actions": [],
							"sid": 235207755496833,
							"children": [
								{
									"eventType": "comment",
									"text": "If player is already in the game..."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 294714314819740,
											"parameters": {
												"instance-variable": "playerId",
												"comparison": 0,
												"value": "playerId"
											}
										}
									],
									"actions": [],
									"sid": 784465969263953,
									"children": [
										{
											"eventType": "comment",
											"text": "If player is not sleeping..."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "Player",
													"sid": 519310111396149,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "TIMER_Player_Sleep"
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 736350743570101,
											"children": [
												{
													"eventType": "comment",
													"text": "If player is not aiming, reveal current tile if possible"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 229331818456769,
															"parameters": {
																"instance-variable": "IN_Aim",
																"comparison": 0,
																"value": "NO"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 413818987662997,
															"parameters": {
																"instance-variable": "carryingItemUID",
																"comparison": 0,
																"value": "NOTHING"
															}
														}
													],
													"actions": [],
													"sid": 872583170916165,
													"children": [
														{
															"eventType": "comment",
															"text": "If player is not waiting for tiles to close"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-timer-running",
																	"objectClass": "Player",
																	"sid": 157427284597374,
																	"behaviorType": "Timer",
																	"parameters": {
																		"tag": "TIMER_Tile_Close"
																	},
																	"isInverted": true
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "Player",
																	"sid": 422939067738251,
																	"parameters": {
																		"instance-variable": "health",
																		"comparison": 4,
																		"value": "0"
																	}
																}
															],
															"actions": [],
															"sid": 300213599011284,
															"children": [
																{
																	"eventType": "comment",
																	"text": "Open new tile"
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "is-animation-playing",
																			"objectClass": "Tile",
																			"sid": 289923452431442,
																			"parameters": {
																				"animation": "ANIM_Tile_Enabled"
																			}
																		},
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "Tile",
																			"sid": 467044414563325,
																			"parameters": {
																				"instance-variable": "playerId",
																				"comparison": 0,
																				"value": "NOTHING"
																			}
																		},
																		{
																			"id": "pick-overlapping-point",
																			"objectClass": "System",
																			"sid": 791205893096488,
																			"parameters": {
																				"object": "Tile",
																				"x": "Player.X",
																				"y": "Player.Y"
																			}
																		},
																		{
																			"id": "pick-nearestfurthest",
																			"objectClass": "Tile",
																			"sid": 246921247596091,
																			"parameters": {
																				"which": "nearest",
																				"x": "Player.X",
																				"y": "Player.Y"
																			}
																		}
																	],
																	"actions": [],
																	"sid": 357395324232724,
																	"children": [
																		{
																			"eventType": "comment",
																			"text": "First tile"
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "Player",
																					"sid": 366354589567681,
																					"parameters": {
																						"instance-variable": "tileUID1",
																						"comparison": 0,
																						"value": "NOTHING"
																					}
																				}
																			],
																			"actions": [
																				{
																					"id": "set-instvar-value",
																					"objectClass": "Player",
																					"sid": 438231698933176,
																					"parameters": {
																						"instance-variable": "tileUID1",
																						"value": "Tile.UID"
																					}
																				},
																				{
																					"customAction": "open",
																					"objectClass": "Tile",
																					"customActionObjectClass": "fTile",
																					"sid": 166633800244794,
																					"parameters": [
																						"Player.playerId",
																						"1"
																					]
																				},
																				{
																					"callFunction": "checkStalemate",
																					"sid": 398417561252019
																				}
																			],
																			"sid": 857029789170060
																		},
																		{
																			"eventType": "comment",
																			"text": "Second tile"
																		},
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "else",
																					"objectClass": "System",
																					"sid": 581458757501397
																				},
																				{
																					"id": "compare-instance-variable",
																					"objectClass": "Player",
																					"sid": 840498003813790,
																					"parameters": {
																						"instance-variable": "tileUID2",
																						"comparison": 0,
																						"value": "NOTHING"
																					}
																				}
																			],
																			"actions": [
																				{
																					"id": "set-instvar-value",
																					"objectClass": "Player",
																					"sid": 890854326904768,
																					"parameters": {
																						"instance-variable": "tileUID2",
																						"value": "Tile.UID"
																					}
																				},
																				{
																					"customAction": "open",
																					"objectClass": "Tile",
																					"customActionObjectClass": "fTile",
																					"sid": 876984902357317,
																					"parameters": [
																						"Player.playerId",
																						"2"
																					]
																				}
																			],
																			"sid": 538576070071918
																		}
																	]
																},
																{
																	"eventType": "comment",
																	"text": "If player has two tiles open, check for a symbol pair"
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "Player",
																			"sid": 692163480622541,
																			"parameters": {
																				"instance-variable": "tileUID1",
																				"comparison": 1,
																				"value": "NOTHING"
																			}
																		},
																		{
																			"id": "compare-instance-variable",
																			"objectClass": "Player",
																			"sid": 129315723326999,
																			"parameters": {
																				"instance-variable": "tileUID2",
																				"comparison": 1,
																				"value": "NOTHING"
																			}
																		}
																	],
																	"actions": [
																		{
																			"customAction": "checkTilePair",
																			"objectClass": "Player",
																			"sid": 721607672677289
																		}
																	],
																	"sid": 135947326574487
																}
															]
														}
													],
													"isOrBlock": true
												},
												{
													"eventType": "comment",
													"text": "If player is aiming, throw item"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 860370992955472
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 352183540614012,
															"parameters": {
																"instance-variable": "carryingItemUID",
																"comparison": 1,
																"value": "NOTHING"
															}
														}
													],
													"actions": [
														{
															"customAction": "throwItem",
															"objectClass": "Player",
															"sid": 522556042124801
														}
													],
													"sid": 129274050892282
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If player is not in the game yet, spawn them"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 697316544262226
										}
									],
									"actions": [],
									"sid": 694275028007698,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 526514644506047,
													"parameters": {
														"object": "Player"
													}
												}
											],
											"actions": [],
											"sid": 530389770831222
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 325181897741633
												}
											],
											"actions": [
												{
													"callFunction": "startLevel",
													"sid": 325093678209652
												}
											],
											"sid": 381329493708745
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"customAction": "spawn",
													"objectClass": "Player",
													"sid": 819608230487082,
													"parameters": [
														"playerId"
													]
												}
											],
											"sid": 506510784293553
										}
									]
								}
							]
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "changeHealth",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "amount",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 788125484134714
						},
						{
							"name": "withVisual",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"sid": 475508187527007
						},
						{
							"name": "withAudio",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 565011835886277
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Damage or heal player"
						}
					],
					"sid": 673511127202233,
					"children": [
						{
							"eventType": "comment",
							"text": "If player is not dead yet, change health by requested amount"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 721088984216789,
									"parameters": {
										"instance-variable": "isDead",
										"comparison": 0,
										"value": "NO"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 223869604463083,
									"parameters": {
										"variable": "amount",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 233222479889720,
									"parameters": {
										"child": "bbPlayer",
										"which": "own"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 745655430789054,
									"parameters": {
										"child": "bbAlert",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 254963312331413,
									"parameters": {
										"instance-variable": "health",
										"value": "max(Self.health + amount, 0)"
									}
								}
							],
							"sid": 833899727559322,
							"children": [
								{
									"eventType": "comment",
									"text": "If player is out of health, kill them:\n- Disable their movement\n- Apply dead effect\n- Drop items (if they carried one)\n- Close tiles (if they had any opened)\n- Update player image (to dead)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 123027420186743,
											"parameters": {
												"instance-variable": "health",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"callFunction": "playSoundAt",
											"sid": 530679357469480,
											"parameters": [
												"Player.X",
												"Player.Y",
												"SFX_Player_Dead",
												"1",
												"NO"
											]
										},
										{
											"id": "stop-all-timers",
											"objectClass": "Player",
											"sid": 175898472183613,
											"behaviorType": "Timer"
										},
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 834805240858095,
											"parameters": {
												"type": "log",
												"message": "Player.colorName & \" player is dead.\""
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "Player",
											"sid": 845111888001132,
											"behaviorType": "8Direction",
											"parameters": {
												"state": "disabled"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 214092696534898,
											"parameters": {
												"instance-variable": "isDead",
												"value": "YES"
											}
										},
										{
											"id": "stop-animation",
											"objectClass": "bbPlayer",
											"sid": 265050558845331
										},
										{
											"id": "set-enabled",
											"objectClass": "Player",
											"sid": 678701319358601,
											"behaviorType": "Solid",
											"parameters": {
												"state": "enabled"
											}
										},
										{
											"id": "tween-value",
											"objectClass": "bbPlayer",
											"sid": 945526641401043,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "TWEEN_bbPlayer_Dead_Color",
												"start-value": "100",
												"end-value": "300",
												"time": "2",
												"ease": "easeoutquad",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "stop-animation",
											"objectClass": "bbAlert",
											"sid": 943845645869848
										},
										{
											"customAction": "endStatus",
											"objectClass": "Player",
											"sid": 541336951875852,
											"parameters": [
												"ITEM_Slow"
											]
										},
										{
											"customAction": "dropItem",
											"objectClass": "Player",
											"sid": 377833263782534
										},
										{
											"customAction": "closeTiles",
											"objectClass": "Player",
											"sid": 681054886734358
										},
										{
											"customAction": "update",
											"objectClass": "UI_Avatar",
											"sid": 650448336760570
										}
									],
									"sid": 447291368356036,
									"children": [
										{
											"eventType": "comment",
											"text": "Close tiles opened by player"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Tile",
													"sid": 557641664446765,
													"parameters": {
														"instance-variable": "playerId",
														"comparison": 0,
														"value": "Player.playerId"
													}
												}
											],
											"actions": [
												{
													"customAction": "close",
													"objectClass": "Tile",
													"customActionObjectClass": "fTile",
													"sid": 688712425179237
												}
											],
											"sid": 184887811251467
										},
										{
											"eventType": "comment",
											"text": "Remove item from player (so it can be grabbed up by others)"
										},
										{
											"eventType": "comment",
											"text": "todo check if I deleted something accidentally (see comment above)"
										},
										{
											"eventType": "comment",
											"text": "Check if there are any other non-dead players"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 839203099816002,
													"parameters": {
														"object": "Player"
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 919959290284361,
													"parameters": {
														"instance-variable": "isDead",
														"comparison": 0,
														"value": "NO"
													}
												}
											],
											"actions": [],
											"sid": 945929010213320,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 557897536167659,
															"parameters": {
																"variable": "playerCount",
																"comparison": 4,
																"value": "1"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 392098048080446,
															"parameters": {
																"object": "Player",
																"expression": "Player.PickedCount",
																"comparison": 0,
																"value": "1"
															}
														}
													],
													"actions": [
														{
															"id": "log",
															"objectClass": "Browser",
															"sid": 889916219404810,
															"parameters": {
																"type": "log",
																"message": "StringSub(\"Multiplayer: last man standing ({0}).\", Player.colorName)"
															}
														},
														{
															"callFunction": "endLevel",
															"sid": 843623620368533,
															"parameters": [
																"2"
															]
														}
													],
													"sid": 894239661621207
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 972571273667702
												}
											],
											"actions": [
												{
													"callFunction": "endLevel",
													"sid": 614682627649996,
													"parameters": [
														"1"
													]
												}
											],
											"sid": 550849872275882
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If player is still alive, show heal / damage effects if requested"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 376510767361930
										}
									],
									"actions": [],
									"sid": 822041563143400,
									"children": [
										{
											"eventType": "comment",
											"text": "Heal effects"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 392168496447940,
													"parameters": {
														"variable": "amount",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [],
											"sid": 321900471978232,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 121996954917598,
															"parameters": {
																"variable": "withVisual",
																"comparison": 0,
																"value": "YES"
															}
														}
													],
													"actions": [
														{
															"customAction": "spawnBlurb",
															"objectClass": "Player",
															"customActionObjectClass": "fBlurbSpawners",
															"sid": 141643181661356,
															"parameters": [
																"\"+\" & roundToDp(amount, 1) & \" sec\"",
																"Self.R_Blurb_ZElevation_Normal",
																"rgbEx(0, 100, 0)",
																"0.8"
															]
														}
													],
													"sid": 376078568096012
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 806150570046534,
															"parameters": {
																"variable": "withAudio",
																"comparison": 0,
																"value": "YES"
															}
														}
													],
													"actions": [],
													"sid": 604890913572311,
													"children": [
														{
															"eventType": "comment",
															"text": "Big heal SFX"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-eventvar",
																	"objectClass": "System",
																	"sid": 754157997259702,
																	"parameters": {
																		"variable": "amount",
																		"comparison": 4,
																		"value": "Player.R_Health_BonusOnPair"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "playSoundAt",
																	"sid": 990033139705348,
																	"parameters": [
																		"Player.X",
																		"Player.Y",
																		"SFX_Player_Healing_Big",
																		"4",
																		"NO"
																	]
																}
															],
															"sid": 187916168701417
														},
														{
															"eventType": "comment",
															"text": "Small heal SFX"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 185459844778206
																}
															],
															"actions": [
																{
																	"callFunction": "playSoundAt",
																	"sid": 548381238374160,
																	"parameters": [
																		"Player.X",
																		"Player.Y",
																		"SFX_Player_Healing_Small",
																		"4",
																		"NO"
																	]
																}
															],
															"sid": 659736751244668
														}
													]
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Damage effects & start invincibility"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 103716627553432
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 439280574851649,
													"parameters": {
														"variable": "amount",
														"comparison": 2,
														"value": "0"
													}
												}
											],
											"actions": [],
											"sid": 202334928635397,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 190049456919921,
															"parameters": {
																"variable": "withVisual",
																"comparison": 0,
																"value": "YES"
															}
														}
													],
													"actions": [
														{
															"id": "tween-value",
															"objectClass": "bbPlayer",
															"sid": 301969991142866,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "TWEEN_Player_Hurt",
																"start-value": "400",
																"end-value": "0",
																"time": "0.5",
																"ease": "easeoutcubic",
																"destroy-on-complete": "no",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														},
														{
															"customAction": "spawnBlurb",
															"objectClass": "Player",
															"customActionObjectClass": "fBlurbSpawners",
															"sid": 938030404420582,
															"parameters": [
																"str(roundToDp(amount, 1)) & \" sec\"",
																"Self.R_Blurb_ZElevation_Normal",
																"rgbEx(100, 0, 0)",
																"0.8"
															]
														}
													],
													"sid": 305919287225949
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 923256256807808,
															"parameters": {
																"variable": "withAudio",
																"comparison": 0,
																"value": "YES"
															}
														}
													],
													"actions": [
														{
															"callFunction": "playSoundAt",
															"sid": 878641004651595,
															"parameters": [
																"Player.X",
																"Player.Y",
																"SFX_Player_Damaged",
																"4",
																"NO"
															]
														}
													],
													"sid": 754838516390490
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Show / hide warning icon above player depending on health"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 952758708966262,
													"parameters": {
														"instance-variable": "health",
														"comparison": 2,
														"value": "Functions.Rules_getNumber(PARAM_Player_Health_Low)"
													}
												}
											],
											"actions": [
												{
													"id": "set-visible",
													"objectClass": "bbAlert",
													"sid": 384288583768960,
													"parameters": {
														"visibility": "visible"
													}
												}
											],
											"sid": 179116160896690
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 466600735235718
												}
											],
											"actions": [
												{
													"id": "set-visible",
													"objectClass": "bbAlert",
													"sid": 858957164079316,
													"parameters": {
														"visibility": "invisible"
													}
												}
											],
											"sid": 300833463733743
										}
									]
								}
							]
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "updateAnimation",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "animationName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 961442772629077
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Set animation of the player's billboard (child)"
						}
					],
					"sid": 540296063401489,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 466047047298398,
									"parameters": {
										"instance-variable": "isDead",
										"comparison": 0,
										"value": "NO"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 872934244933273,
									"parameters": {
										"child": "bbPlayer",
										"which": "own"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "bbPlayer",
									"sid": 993304183067625,
									"parameters": {
										"animation": "Self.playerId & \"_\" & animationName"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "bbPlayer",
									"sid": 349749332304974,
									"parameters": {
										"animation": "Self.colorName & \"_\" & animationName",
										"from": "beginning"
									}
								}
							],
							"sid": 193507456176871
						}
					]
				}
			],
			"sid": 553092770335843
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Item related player actions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"aceType": "action",
					"aceName": "carryItem",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Start carrying picked item"
						}
					],
					"sid": 703798291940540,
					"children": [
						{
							"eventType": "comment",
							"text": "If item is a shield, activate it immediately"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Item",
									"sid": 717163064994800,
									"parameters": {
										"instance-variable": "itemType",
										"comparison": 0,
										"value": "ITEM_Shield"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Item",
									"sid": 114244463755028
								},
								{
									"customAction": "startStatus",
									"objectClass": "Player",
									"sid": 553701921321609,
									"parameters": [
										"ITEM_Shield"
									]
								}
							],
							"sid": 359079640996485
						},
						{
							"eventType": "comment",
							"text": "Otherwise, carry item"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 563592245543670
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 217474709699016,
									"parameters": {
										"instance-variable": "carryingItemUID",
										"value": "Item.UID"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Player",
									"sid": 985733681925909,
									"parameters": {
										"child": "Item",
										"transform-x": false,
										"transform-y": false,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Item",
									"sid": 181445726465489,
									"parameters": {
										"instance-variable": "lastCarrierPlayerUID",
										"value": "Player.UID"
									}
								},
								{
									"callFunction": "playSound",
									"sid": 823989533308654,
									"parameters": [
										"SFX_Player_Item_Pickup",
										"1",
										"0"
									]
								}
							],
							"sid": 916265000217546
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "throwItem",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Throw carried item towards current aim angle"
						}
					],
					"sid": 423058019867266,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 514187011857249,
									"parameters": {
										"child": "Item",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"callFunction": "playSoundAt",
									"sid": 463799468587982,
									"parameters": [
										"Cannon.X",
										"Cannon.Y",
										"SFX_Player_Item_Throw",
										"4",
										"NO"
									]
								},
								{
									"id": "remove-child",
									"objectClass": "Player",
									"sid": 289661651504534,
									"parameters": {
										"child": "Item"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 264797158936913,
									"parameters": {
										"instance-variable": "carryingItemUID",
										"value": "NOTHING"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "Item",
									"sid": 100491250397151,
									"behaviorType": "Bullet",
									"parameters": {
										"state": "enabled"
									}
								},
								{
									"id": "set-speed",
									"objectClass": "Item",
									"sid": 877892085127239,
									"behaviorType": "Bullet",
									"parameters": {
										"speed": "Player.R_Item_MovementSpeed"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "Item",
									"sid": 689399500699290,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Self.R_OverlapCheckTIme",
										"type": "regular",
										"tag": "TIMER_Item_Checkup"
									}
								}
							],
							"sid": 255281553956471
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "dropItem",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Put down carried item at the current position (when player dies or falls asleep)"
						}
					],
					"sid": 115418377113022,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 988853820191048,
									"parameters": {
										"child": "Item",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 463735870925109,
									"parameters": {
										"instance-variable": "carryingItemUID",
										"value": "NOTHING"
									}
								},
								{
									"id": "remove-child",
									"objectClass": "Player",
									"sid": 221643856982969,
									"parameters": {
										"child": "Item"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Item",
									"sid": 752870604785753,
									"parameters": {
										"instance-variable": "lastCarrierPlayerUID",
										"value": "NOTHING"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Item",
									"sid": 768806686329491,
									"disabled": true,
									"parameters": {
										"instance-variable": "targetPlayerUID",
										"value": "NOTHING"
									}
								}
							],
							"sid": 371309799734716
						}
					]
				}
			],
			"sid": 749233979031960
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tile related player actions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"aceType": "action",
					"aceName": "checkTilePair",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Check for a matching symbol after a player opens the second tile"
						}
					],
					"sid": 403426051865586,
					"children": [
						{
							"eventType": "variable",
							"name": "healthChangeAmount",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 180666200289768
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Tile",
									"sid": 251717179463792,
									"parameters": {
										"unique-id": "Player.tileUID1"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "fTile",
									"sid": 970654978157992,
									"parameters": {
										"unique-id": "Player.tileUID2"
									}
								}
							],
							"actions": [],
							"sid": 633163847874164,
							"children": [
								{
									"eventType": "comment",
									"text": "If symbols match, disable tiles, count pair & update player images (crown winning players, remove crown from others)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Tile",
											"sid": 895493647866635,
											"parameters": {
												"instance-variable": "symbol",
												"comparison": 0,
												"value": "fTile.symbol"
											}
										}
									],
									"actions": [
										{
											"customAction": "disable",
											"objectClass": "Tile",
											"customActionObjectClass": "fTile",
											"sid": 928973305264086
										},
										{
											"customAction": "disable",
											"objectClass": "fTile",
											"sid": 177316980902040
										},
										{
											"id": "add-to-instvar",
											"objectClass": "Player",
											"sid": 688497593461033,
											"parameters": {
												"instance-variable": "pairsFound",
												"value": "1"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 493545489220186,
											"parameters": {
												"variable": "pairsFound",
												"value": "1"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 398502953381732,
											"parameters": {
												"variable": "healthChangeAmount",
												"value": "Player.R_Health_BonusOnPair"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 618024666914724,
											"parameters": {
												"instance-variable": "tileUID1",
												"value": "NOTHING"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 166088862066276,
											"parameters": {
												"instance-variable": "tileUID2",
												"value": "NOTHING"
											}
										},
										{
											"customAction": "update",
											"objectClass": "UI_Avatar",
											"sid": 205984086454903
										}
									],
									"sid": 194605797339304,
									"children": [
										{
											"eventType": "comment",
											"text": "If symbol is an item (not numbered)..."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 573846275440910,
													"parameters": {
														"object": "Tile",
														"expression": "int(Tile.symbol)",
														"comparison": 0,
														"value": "0"
													}
												}
											],
											"actions": [],
											"sid": 997937163847438,
											"children": [
												{
													"eventType": "comment",
													"text": "If item is health, heal player"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "Tile",
															"sid": 853976443118702,
															"parameters": {
																"instance-variable": "symbol",
																"comparison": 0,
																"value": "ITEM_Health"
															}
														}
													],
													"actions": [
														{
															"id": "add-to-eventvar",
															"objectClass": "System",
															"sid": 308465724392378,
															"parameters": {
																"variable": "healthChangeAmount",
																"value": "Player.R_Health_BonusOnHeal"
															}
														}
													],
													"sid": 435086597087010
												},
												{
													"eventType": "comment",
													"text": "Otherwise spawn item"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 789509459383863
														}
													],
													"actions": [
														{
															"customAction": "spawn",
															"objectClass": "Item",
															"sid": 590299870549008,
															"parameters": [
																"fTile.X",
																"fTile.Y",
																"fTile.symbol"
															]
														},
														{
															"callFunction": "playSoundAt",
															"sid": 130736908983134,
															"parameters": [
																"fTile.X",
																"fTile.Y",
																"SFX_Player_Pair_Item",
																"4",
																"NO"
															]
														}
													],
													"sid": 195868458937878
												}
											]
										},
										{
											"eventType": "comment",
											"text": "If symbol is not an item..."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 559410302612642
												}
											],
											"actions": [
												{
													"callFunction": "playSoundAt",
													"sid": 806641559350618,
													"parameters": [
														"fTile.X",
														"fTile.Y",
														"SFX_Player_Pair_Symbol",
														"4",
														"NO"
													]
												}
											],
											"sid": 766594842650164
										},
										{
											"eventType": "comment",
											"text": "Check win condition"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 815885566535834,
													"parameters": {
														"variable": "pairsFound",
														"comparison": 5,
														"value": "pairsTotal"
													}
												}
											],
											"actions": [
												{
													"id": "log",
													"objectClass": "Browser",
													"sid": 686535452540283,
													"parameters": {
														"type": "log",
														"message": "\"All pairs were found.\""
													}
												},
												{
													"callFunction": "endLevel",
													"sid": 558572284250317,
													"parameters": [
														"2"
													]
												}
											],
											"sid": 269811260453554
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If symbols don't match, start reveal timer (close with a delay)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 809853381521252
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "Player",
											"sid": 617354778848010,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "R_Level_Tile_Reveal_Time",
												"type": "once",
												"tag": "TIMER_Tile_Close"
											}
										}
									],
									"sid": 435304796470472
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Apply health change if needed (heal or damage after finding a pair)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 264757440803351,
									"parameters": {
										"variable": "healthChangeAmount",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"customAction": "changeHealth",
									"objectClass": "Player",
									"sid": 389999298738023,
									"parameters": [
										"healthChangeAmount",
										"YES",
										"YES"
									]
								}
							],
							"sid": 267585821690998
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "closeTiles",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Close tile pair opened by the player"
						}
					],
					"sid": 979087796385913,
					"children": [
						{
							"eventType": "comment",
							"text": "Close first tile"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Tile",
									"sid": 439133302622357,
									"parameters": {
										"unique-id": "Player.tileUID1"
									}
								}
							],
							"actions": [
								{
									"customAction": "close",
									"objectClass": "Tile",
									"customActionObjectClass": "fTile",
									"sid": 306385261388141
								}
							],
							"sid": 527103224741821
						},
						{
							"eventType": "comment",
							"text": "Close second tile"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Tile",
									"sid": 317668987134735,
									"parameters": {
										"unique-id": "Player.tileUID2"
									}
								}
							],
							"actions": [
								{
									"customAction": "close",
									"objectClass": "Tile",
									"customActionObjectClass": "fTile",
									"sid": 223832076459401
								}
							],
							"sid": 642044392969172
						},
						{
							"eventType": "comment",
							"text": "Clear tile references of the player"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 761005558301276,
									"parameters": {
										"instance-variable": "tileUID1",
										"value": "NOTHING"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 950495685027743,
									"parameters": {
										"instance-variable": "tileUID2",
										"value": "NOTHING"
									}
								}
							],
							"sid": 728263264473695
						}
					]
				}
			],
			"sid": 729039089153261
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Status related player actions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"aceType": "action",
					"aceName": "startStatus",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "itemType",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 458212392066247
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Start a status effect on the player:\n- Shield\n- Sleep\n- Slow"
						}
					],
					"sid": 170349736648979,
					"children": [
						{
							"eventType": "comment",
							"text": "Shield: spawn or update existing shield"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 569432708124723,
									"parameters": {
										"variable": "itemType",
										"comparison": 0,
										"value": "ITEM_Shield"
									}
								}
							],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 478966222082896,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Functions.Rules_getNumber(PARAM_Item_Shield_Time)",
										"type": "once",
										"tag": "TIMER_Player_Shield"
									}
								}
							],
							"sid": 875653804145525,
							"children": [
								{
									"eventType": "comment",
									"text": "Update existing shield"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 113729782016021,
											"parameters": {
												"child": "Shield",
												"which": "own"
											}
										}
									],
									"actions": [],
									"sid": 983011835617914,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-playing",
													"objectClass": "Shield",
													"sid": 744086296763941,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "TWEEN_Shield_Disappear"
													}
												}
											],
											"actions": [
												{
													"id": "stop-tweens",
													"objectClass": "Shield",
													"sid": 358657158891754,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "TWEEN_Shield_Disappear"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Shield",
													"sid": 707340036440067,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "TWEEN_Shield_Appear",
														"property": "size",
														"end-x": "C_Shield_Size_Max",
														"end-y": "C_Shield_Size_Max",
														"time": "C_Shield_Tween_Time",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 920779340637609
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If player does not have shield child objects"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 923790480250009
										}
									],
									"actions": [],
									"sid": 331248608202530,
									"children": [
										{
											"eventType": "comment",
											"text": "Shield part 1"
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "Player",
													"sid": 225963493296464,
													"parameters": {
														"object": "Shield",
														"layer": "LAYER_Main",
														"image-point": "0",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "add-child",
													"objectClass": "Player",
													"sid": 957832505129186,
													"parameters": {
														"child": "Shield",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-o": false,
														"transform-z-elevation": false,
														"transform-visibility": false,
														"destroy-with-parent": true
													}
												},
												{
													"id": "set-cycle-position",
													"objectClass": "Shield",
													"sid": 951277804888169,
													"behaviorType": "Sine",
													"parameters": {
														"cycle-position": "0"
													}
												},
												{
													"id": "set-z-elevation",
													"objectClass": "Shield",
													"sid": 601834090809142,
													"parameters": {
														"z": "Player.Width * 0.5"
													}
												},
												{
													"id": "update-initial-state",
													"objectClass": "Shield",
													"sid": 796033737747802,
													"behaviorType": "Sine"
												},
												{
													"id": "set-size",
													"objectClass": "Shield",
													"sid": 487768826657916,
													"parameters": {
														"width": "0",
														"height": "0"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Shield",
													"sid": 506285414495724,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "TWEEN_Shield_Appear",
														"property": "size",
														"end-x": "C_Shield_Size_Max",
														"end-y": "C_Shield_Size_Max",
														"time": "C_Shield_Tween_Time",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 397876273853650
										},
										{
											"eventType": "comment",
											"text": "Shield part 2"
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "Player",
													"sid": 446260471688969,
													"parameters": {
														"object": "Shield",
														"layer": "LAYER_Main",
														"image-point": "0",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "add-child",
													"objectClass": "Player",
													"sid": 271739431832642,
													"parameters": {
														"child": "Shield",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-o": false,
														"transform-z-elevation": false,
														"transform-visibility": false,
														"destroy-with-parent": true
													}
												},
												{
													"id": "set-cycle-position",
													"objectClass": "Shield",
													"sid": 654166633599930,
													"disabled": true,
													"behaviorType": "Sine",
													"parameters": {
														"cycle-position": "0.05"
													}
												},
												{
													"id": "set-z-elevation",
													"objectClass": "Shield",
													"sid": 844227826053486,
													"parameters": {
														"z": "Player.Width * 0.5 + C_Shield_ZOffset"
													}
												},
												{
													"id": "update-initial-state",
													"objectClass": "Shield",
													"sid": 424553943147822,
													"behaviorType": "Sine"
												},
												{
													"id": "set-size",
													"objectClass": "Shield",
													"sid": 749565358099317,
													"parameters": {
														"width": "0",
														"height": "0"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Shield",
													"sid": 509076037221386,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "TWEEN_Shield_Appear",
														"property": "size",
														"end-x": "C_Shield_Size_Max",
														"end-y": "C_Shield_Size_Max",
														"time": "C_Shield_Tween_Time",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 556174021957102
										},
										{
											"eventType": "comment",
											"text": "Shield part 3"
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "Player",
													"sid": 146090630217714,
													"parameters": {
														"object": "Shield",
														"layer": "LAYER_Main",
														"image-point": "0",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "add-child",
													"objectClass": "Player",
													"sid": 791715100189951,
													"parameters": {
														"child": "Shield",
														"transform-x": true,
														"transform-y": true,
														"transform-w": false,
														"transform-h": false,
														"transform-a": false,
														"transform-o": false,
														"transform-z-elevation": false,
														"transform-visibility": false,
														"destroy-with-parent": true
													}
												},
												{
													"id": "set-cycle-position",
													"objectClass": "Shield",
													"sid": 811606930127505,
													"disabled": true,
													"behaviorType": "Sine",
													"parameters": {
														"cycle-position": "0.1"
													}
												},
												{
													"id": "set-z-elevation",
													"objectClass": "Shield",
													"sid": 540148888898216,
													"parameters": {
														"z": "Player.Width * 0.5 + C_Shield_ZOffset * 2"
													}
												},
												{
													"id": "update-initial-state",
													"objectClass": "Shield",
													"sid": 138553705908600,
													"behaviorType": "Sine"
												},
												{
													"id": "set-size",
													"objectClass": "Shield",
													"sid": 730106257717540,
													"parameters": {
														"width": "0",
														"height": "0"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Shield",
													"sid": 982307701756774,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "TWEEN_Shield_Appear",
														"property": "size",
														"end-x": "C_Shield_Size_Max",
														"end-y": "C_Shield_Size_Max",
														"time": "C_Shield_Tween_Time",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 179791198393261
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Sleep for a while:\n- start penalty timer (disables player interaction)\n- show sleeping animation\n- spawn first sleep blurb (zZz) with a delay\n- drop carried item"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 162257146659614
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 196373857664704,
									"parameters": {
										"variable": "itemType",
										"comparison": 0,
										"value": "ITEM_Sleep"
									}
								}
							],
							"actions": [
								{
									"callFunction": "playSoundAt",
									"sid": 355204692065749,
									"parameters": [
										"Player.X",
										"Player.Y",
										"SFX_Player_Sleeping",
										"1",
										"NO"
									]
								},
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 297974838316816,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Functions.Rules_getNumber(PARAM_Item_Sleep_Time)",
										"type": "once",
										"tag": "TIMER_Player_Sleep"
									}
								},
								{
									"customAction": "updateAnimation",
									"objectClass": "Player",
									"sid": 149222350355827,
									"parameters": [
										"ANIM_Player_Sleeping"
									]
								},
								{
									"customAction": "dropItem",
									"objectClass": "Player",
									"sid": 735707502297827
								},
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 898347578147341,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.1",
										"type": "once",
										"tag": "TIMER_Player_Sleep_Blurb"
									}
								}
							],
							"sid": 642134489544744
						},
						{
							"eventType": "comment",
							"text": "Slow: \n- start penalty timer (player moves slower)\n- (re)spawn particle emitter"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 651860939502309
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 400717604768234,
									"parameters": {
										"variable": "itemType",
										"comparison": 0,
										"value": "ITEM_Slow"
									}
								}
							],
							"actions": [
								{
									"callFunction": "playSoundAt",
									"sid": 224855024083591,
									"parameters": [
										"Player.X",
										"Player.Y",
										"SFX_Player_Slowing",
										"1",
										"NO"
									]
								},
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 107311286737576,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Functions.Rules_getNumber(PARAM_Item_Slow_Time)",
										"type": "once",
										"tag": "TIMER_Player_Slow"
									}
								},
								{
									"customAction": "endStatus",
									"objectClass": "Player",
									"sid": 242399952817763,
									"parameters": [
										"ITEM_Slow"
									]
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Player",
									"sid": 437607778990813,
									"parameters": {
										"object": "Particles",
										"layer": "LAYER_Billboards",
										"image-point": "0",
										"create-hierarchy": false,
										"template-name": "ITEM_Slow"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Player",
									"sid": 239265944693029,
									"parameters": {
										"child": "Particles",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								}
							],
							"sid": 854110526508451
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "endStatus",
					"objectClass": "Player",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "itemType",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 844941604477456
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "End a status effect on the player:\n- Shield\n- Sleep\n- Slow"
						}
					],
					"sid": 870462205549706,
					"children": [
						{
							"eventType": "comment",
							"text": "Shield: fade out & destroy shield"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 598888374600960,
									"parameters": {
										"variable": "itemType",
										"comparison": 0,
										"value": "ITEM_Shield"
									}
								}
							],
							"actions": [],
							"sid": 278001267970727,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 275419349440901,
											"parameters": {
												"child": "Shield",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "Shield",
											"sid": 614187719741438,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "TWEEN_Shield_Disappear",
												"property": "size",
												"end-x": "0",
												"end-y": "0",
												"time": "C_Shield_Tween_Time",
												"ease": "easeoutcubic",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 609955797528398
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Sleep: stop spawning sleep (zZz) blurbs"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 522179693139480
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 517449943326705,
									"parameters": {
										"variable": "itemType",
										"comparison": 0,
										"value": "ITEM_Sleep"
									}
								}
							],
							"actions": [
								{
									"id": "stop-timer",
									"objectClass": "Player",
									"sid": 971630265230889,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "TIMER_Player_Sleep_Blurb"
									}
								}
							],
							"sid": 156085251008777
						},
						{
							"eventType": "comment",
							"text": "Slow: stop emitting particles and queue destruction of particle emitter"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 333956809034579
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 473002305038569,
									"parameters": {
										"variable": "itemType",
										"comparison": 0,
										"value": "ITEM_Slow"
									}
								}
							],
							"actions": [],
							"sid": 340592122982866,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 183321519145470,
											"parameters": {
												"child": "Particles",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-rate",
											"objectClass": "Particles",
											"sid": 563772890265987,
											"parameters": {
												"rate": "0"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "Particles",
											"sid": 133748292637602,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "Particles.Timeout",
												"type": "once",
												"tag": "TIMER_Particles_Destroy"
											}
										}
									],
									"sid": 761849882192557
								}
							]
						}
					]
				}
			],
			"sid": 810449726370486
		}
	],
	"sid": 183802187831019
}