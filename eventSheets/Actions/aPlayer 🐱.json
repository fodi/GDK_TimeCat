{
	"name": "aPlayer üê±",
	"events": [
		{
			"aceType": "action",
			"aceName": "init",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "Override max health"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 862580686969775,
					"parameters": {
						"instance-variable": "R_Health_Max",
						"value": "Functions.Config_getNumber(PARAM_Player_Health, Self.R_Health_Max)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 699716346394056,
					"parameters": {
						"instance-variable": "health",
						"value": "Self.R_Health_Max"
					}
				},
				{
					"type": "comment",
					"text": "Override max movement speed"
				},
				{
					"id": "set-max-speed",
					"objectClass": "Player",
					"sid": 815484045892867,
					"behaviorType": "8Direction",
					"parameters": {
						"max-speed": "Functions.Config_getNumber(PARAM_Player_MovementSpeed, Self.8Direction.MaxSpeed)"
					}
				}
			],
			"sid": 846445072912984,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-children",
							"objectClass": "Player",
							"sid": 492436812501198,
							"parameters": {
								"child": "bbPlayer",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "bbPlayer",
							"sid": 336314641302842,
							"parameters": {
								"instance-variable": "playerId",
								"value": "Player.playerId"
							}
						}
					],
					"sid": 713148674116131
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "tick",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 608725959345493,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"customAction": "changeHealth",
							"objectClass": "Player",
							"sid": 595207298983393,
							"parameters": [
								"-dt",
								"NO"
							]
						}
					],
					"sid": 400669109214555
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 185433875226591,
							"parameters": {
								"instance-variable": "health",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 684806677738028,
					"children": [
						{
							"eventType": "comment",
							"text": "todo optimize updates"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UI_TextSF",
									"sid": 639985147460780,
									"parameters": {
										"instance-variable": "role",
										"comparison": 0,
										"value": "ROLE_PlayerHealth"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "UI_TextSF",
									"sid": 338028364644187,
									"parameters": {
										"instance-variable": "paramNumber",
										"comparison": 0,
										"value": "Player.playerId"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "UI_TextSF",
									"sid": 550285972629851,
									"parameters": {
										"text": "\"[color=#\" & trim(tokenat(C_CSV_ColorsHex, Player.playerId, \",\")) & \"][scale=0.25]Health[/scale]\" & newline & round(Player.health)"
									}
								}
							],
							"sid": 310236925171770
						},
						{
							"eventType": "variable",
							"name": "isAngleSet",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 748713342615143
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 296838523700858,
									"parameters": {
										"instance-variable": "IN_Up",
										"comparison": 0,
										"value": "YES"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 627153922099229,
									"parameters": {
										"instance-variable": "IN_Down",
										"comparison": 0,
										"value": "YES"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 736439307004044,
									"parameters": {
										"instance-variable": "IN_Left",
										"comparison": 0,
										"value": "YES"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 850904092259765,
									"parameters": {
										"instance-variable": "IN_Right",
										"comparison": 0,
										"value": "YES"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 790496635031229,
									"parameters": {
										"instance-variable": "currentAngle",
										"value": "angle(0, 0, Player.IN_Right - Player.IN_Left, Player.IN_Down - Player.IN_Up)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 694381256892420,
									"parameters": {
										"variable": "isAngleSet",
										"value": "YES"
									}
								}
							],
							"sid": 486979522117559,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 572215459666348,
									"parameters": {
										"instance-variable": "IN_Analog_Active",
										"comparison": 0,
										"value": "YES"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 910658680496031,
									"parameters": {
										"instance-variable": "currentAngle",
										"value": "Player.IN_Analog_Angle"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 824155141878664,
									"parameters": {
										"variable": "isAngleSet",
										"value": "YES"
									}
								}
							],
							"sid": 441206296259690
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 608160465761650,
									"parameters": {
										"variable": "isAngleSet",
										"comparison": 0,
										"value": "YES"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 548019944048363,
									"parameters": {
										"child": "bbPlayer",
										"which": "own"
									}
								}
							],
							"actions": [],
							"sid": 139286403473144,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 973018246771638,
											"parameters": {
												"instance-variable": "IN_Aiming",
												"comparison": 0,
												"value": "NO"
											}
										}
									],
									"actions": [
										{
											"id": "set-vector-x",
											"objectClass": "Player",
											"sid": 388606943361479,
											"behaviorType": "8Direction",
											"parameters": {
												"vector-x": "cos(Player.currentAngle) * Player.8Direction.MaxSpeed"
											}
										},
										{
											"id": "set-vector-y",
											"objectClass": "Player",
											"sid": 374942039813110,
											"behaviorType": "8Direction",
											"parameters": {
												"vector-y": "sin(Player.currentAngle) * Player.8Direction.MaxSpeed"
											}
										}
									],
									"sid": 871548221558014
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 209980953132901
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "Player",
											"sid": 164899503664935,
											"behaviorType": "8Direction"
										}
									],
									"sid": 118088490835457
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 207407997233340,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "-60",
												"second-angle": "60"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "bbPlayer",
											"sid": 811794201605945,
											"parameters": {
												"animation": "Self.playerId & \"_\" & ANIM_Right",
												"from": "beginning"
											}
										}
									],
									"sid": 514436874259137
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 877277876134328
										},
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 807653698634221,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "180-60",
												"second-angle": "180+60"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "bbPlayer",
											"sid": 214621983178382,
											"parameters": {
												"animation": "Self.playerId & \"_\" & ANIM_Left",
												"from": "beginning"
											}
										}
									],
									"sid": 239801443569350
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 207260299059104
										},
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 657282814560684,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "270-30",
												"second-angle": "270+30"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "bbPlayer",
											"sid": 748524852573552,
											"parameters": {
												"animation": "Self.playerId & \"_\" & ANIM_Up",
												"from": "beginning"
											}
										}
									],
									"sid": 835050479583592
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 536771859754947
										},
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 536757696658184,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "90-30",
												"second-angle": "90+30"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "bbPlayer",
											"sid": 133565815494289,
											"parameters": {
												"animation": "Self.playerId & \"_\" & ANIM_Down",
												"from": "beginning"
											}
										}
									],
									"sid": 922295346248928
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 492533768016763
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "bbPlayer",
									"sid": 415262394195642,
									"parameters": {
										"animation": "Self.playerId & \"_\" & ANIM_Idle",
										"from": "beginning"
									}
								},
								{
									"id": "stop",
									"objectClass": "Player",
									"sid": 569809901879584,
									"behaviorType": "8Direction"
								}
							],
							"sid": 946782323729348
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "onJoinOrReveal",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "sourcePlayerId",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 259019913465708
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 234693284807956,
			"children": [
				{
					"eventType": "comment",
					"text": "If player is already in the game..."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 833972293002152,
							"parameters": {
								"instance-variable": "playerId",
								"comparison": 0,
								"value": "sourcePlayerId"
							}
						}
					],
					"actions": [],
					"sid": 504967874491718,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-timer-running",
									"objectClass": "Player",
									"sid": 106966330727118,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "TIMER_TileReveal"
									},
									"isInverted": true
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 234110270515131,
									"parameters": {
										"instance-variable": "health",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 966175049562226,
							"children": [
								{
									"eventType": "comment",
									"text": "Open new tile"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "Tile",
											"sid": 490875583598473,
											"parameters": {
												"animation": "ANIM_Closed"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Tile",
											"sid": 235202388388662,
											"parameters": {
												"instance-variable": "playerId",
												"comparison": 0,
												"value": "NOTHING"
											}
										},
										{
											"id": "pick-overlapping-point",
											"objectClass": "System",
											"sid": 928453465777006,
											"parameters": {
												"object": "Tile",
												"x": "Player.X",
												"y": "Player.Y"
											}
										},
										{
											"id": "pick-nearestfurthest",
											"objectClass": "Tile",
											"sid": 645007002645906,
											"parameters": {
												"which": "nearest",
												"x": "Player.X",
												"y": "Player.Y"
											}
										}
									],
									"actions": [],
									"sid": 184320911415308,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 963649651282440,
													"parameters": {
														"instance-variable": "tileUID1",
														"comparison": 0,
														"value": "NOTHING"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Player",
													"sid": 426226412533925,
													"parameters": {
														"instance-variable": "tileUID1",
														"value": "Tile.UID"
													}
												},
												{
													"customAction": "open",
													"objectClass": "Tile",
													"customActionObjectClass": "fTile",
													"sid": 209175929133806,
													"parameters": [
														"Player.playerId"
													]
												}
											],
											"sid": 281655125209279
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 637508376541953
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 771582466392181,
													"parameters": {
														"instance-variable": "tileUID2",
														"comparison": 0,
														"value": "NOTHING"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Player",
													"sid": 165974976210248,
													"parameters": {
														"instance-variable": "tileUID2",
														"value": "Tile.UID"
													}
												},
												{
													"customAction": "open",
													"objectClass": "Tile",
													"customActionObjectClass": "fTile",
													"sid": 336376511049943,
													"parameters": [
														"Player.playerId"
													]
												}
											],
											"sid": 194604687258205
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If player has two tiles open, start reveal timer"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 534143525274391,
											"parameters": {
												"instance-variable": "tileUID1",
												"comparison": 1,
												"value": "NOTHING"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 838678095704613,
											"parameters": {
												"instance-variable": "tileUID2",
												"comparison": 1,
												"value": "NOTHING"
											}
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "Player",
											"sid": 890147689037123,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "C_Tile_Reveal_Time",
												"type": "once",
												"tag": "TIMER_TileReveal"
											}
										}
									],
									"sid": 786983051909338
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If player is not in the game yet, spawn them"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 970898995867014
						}
					],
					"actions": [],
					"sid": 694653583056779,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-random-instance",
									"objectClass": "System",
									"sid": 786383835294095,
									"parameters": {
										"object": "Tile"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 345954270789600,
									"parameters": {
										"object-to-create": "Player",
										"layer": "LAYER_Player",
										"x": "Tile.X",
										"y": "Tile.Y",
										"create-hierarchy": true,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 535979190304462,
									"parameters": {
										"instance-variable": "playerId",
										"value": "sourcePlayerId"
									}
								},
								{
									"customAction": "init",
									"objectClass": "Player",
									"sid": 580244041785290
								}
							],
							"sid": 553422635175293
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "changeHealth",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "amount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 788125484134714
				},
				{
					"name": "showEffect",
					"type": "number",
					"initialValue": "1",
					"comment": "",
					"sid": 475508187527007
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "Player",
					"sid": 296488847648050,
					"parameters": {
						"instance-variable": "health",
						"comparison": 4,
						"value": "0"
					}
				},
				{
					"id": "pick-children",
					"objectClass": "Player",
					"sid": 560684962059390,
					"parameters": {
						"child": "bbPlayer",
						"which": "own"
					}
				}
			],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 501243423629280,
					"parameters": {
						"instance-variable": "health",
						"value": "clamp(Self.health + amount, 0, Self.R_Health_Max)"
					}
				}
			],
			"sid": 876028868693683,
			"children": [
				{
					"eventType": "comment",
					"text": "If player is out of health, kill them"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 346650929755163,
							"parameters": {
								"instance-variable": "health",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "stop-timer",
							"objectClass": "Player",
							"sid": 685209602632978,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "TIMER_TileReveal"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 204871752974923,
							"parameters": {
								"type": "log",
								"message": "\"Player \" & Player.playerId & \" ran out of time.\""
							}
						},
						{
							"id": "set-animation",
							"objectClass": "bbPlayer",
							"sid": 729310302741841,
							"parameters": {
								"animation": "ANIM_Dead",
								"from": "beginning"
							}
						},
						{
							"id": "stop",
							"objectClass": "Player",
							"sid": 315281770010920,
							"behaviorType": "8Direction"
						}
					],
					"sid": 309837567595600,
					"children": [
						{
							"eventType": "comment",
							"text": "Close tiles opened by player"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Tile",
									"sid": 259874945030743,
									"parameters": {
										"instance-variable": "playerId",
										"comparison": 0,
										"value": "Player.playerId"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "todo fix possible bugs "
								},
								{
									"customAction": "close",
									"objectClass": "Tile",
									"customActionObjectClass": "fTile",
									"sid": 988829506412354
								}
							],
							"sid": 719144108931133
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Otherwise, show heal / hurt effect if needed"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 323851579498259
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 933488069232212,
							"parameters": {
								"variable": "showEffect",
								"comparison": 0,
								"value": "YES"
							}
						}
					],
					"actions": [],
					"sid": 362370292717676,
					"children": [
						{
							"eventType": "comment",
							"text": "Heal player"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 735147876998696,
									"parameters": {
										"variable": "amount",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 862403355241923,
									"parameters": {
										"type": "log",
										"message": "\"Player healing: \" & amount"
									}
								},
								{
									"type": "comment",
									"text": "todo"
								}
							],
							"sid": 718974204095653
						},
						{
							"eventType": "comment",
							"text": "Damage player & start invincibility"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 323255316730658
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "todo use separate timer / other effect?"
								},
								{
									"id": "tween-value",
									"objectClass": "bbPlayer",
									"sid": 445765062360582,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "TWEEN_Player_Hurt",
										"start-value": "400",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 276312573508081
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "onStartAim",
			"objectClass": "fPlayer",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 806623578106467
		},
		{
			"aceType": "action",
			"aceName": "onEndAim",
			"objectClass": "fPlayer",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 384748530779183
		}
	],
	"sid": 183802187831019
}