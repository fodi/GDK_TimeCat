{
	"name": "aPlayer üê±",
	"events": [
		{
			"aceType": "action",
			"aceName": "init",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 846445072912984,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Overrides"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 321717557408034,
							"parameters": {
								"instance-variable": "R_Health_Start",
								"value": "Functions.Config_getNumber(PARAM_Player_Health)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 408952610930772,
							"parameters": {
								"instance-variable": "R_MovementSpeed_Normal",
								"value": "Functions.Config_getNumber(PARAM_Player_MovementSpeed)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 586549727729621,
							"parameters": {
								"instance-variable": "R_MovementSpeed_Slow",
								"value": "Functions.Config_getNumber(PARAM_Player_MovementSpeed_Slow)"
							}
						},
						{
							"type": "comment",
							"text": "Initialize "
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 797936773881677,
							"parameters": {
								"instance-variable": "health",
								"value": "Self.R_Health_Start"
							}
						},
						{
							"id": "set-max-speed",
							"objectClass": "Player",
							"sid": 111343665329170,
							"behaviorType": "8Direction",
							"parameters": {
								"max-speed": "Self.R_MovementSpeed_Normal"
							}
						}
					],
					"sid": 447534482310816
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-children",
							"objectClass": "Player",
							"sid": 492436812501198,
							"parameters": {
								"child": "bbPlayer",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "bbPlayer",
							"sid": 336314641302842,
							"parameters": {
								"instance-variable": "playerId",
								"value": "Player.playerId"
							}
						}
					],
					"sid": 713148674116131
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "tick",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 608725959345493,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 223165689984766,
							"parameters": {
								"variable": "hasLevelEnded",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [],
					"sid": 587775716959958,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 747039579730448,
									"parameters": {
										"instance-variable": "isDead",
										"comparison": 0,
										"value": "NO"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 895350066261387,
									"parameters": {
										"child": "bbPlayer",
										"which": "own"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "Player",
									"sid": 425733675334449,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "TIMER_Player_Sleep"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 565595879900194,
							"children": [
								{
									"eventType": "comment",
									"text": "Handle digital movement"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 203156690897941,
											"parameters": {
												"instance-variable": "IN_Up",
												"comparison": 0,
												"value": "YES"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 492325711733329,
											"parameters": {
												"instance-variable": "IN_Down",
												"comparison": 0,
												"value": "YES"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 798679687648059,
											"parameters": {
												"instance-variable": "IN_Left",
												"comparison": 0,
												"value": "YES"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 548088366531169,
											"parameters": {
												"instance-variable": "IN_Right",
												"comparison": 0,
												"value": "YES"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 758025289573903,
											"parameters": {
												"instance-variable": "IN_Move",
												"value": "YES"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 499330644360394,
											"parameters": {
												"instance-variable": "IN_Move_Angle",
												"value": "angle(0, 0, Player.IN_Right - Player.IN_Left, Player.IN_Down - Player.IN_Up)"
											}
										}
									],
									"sid": 151547628573832,
									"isOrBlock": true
								},
								{
									"eventType": "comment",
									"text": "Update player's current angle variable if player is moving or aiming (otherwise, keep last value)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 570176993187359,
											"parameters": {
												"instance-variable": "IN_Move",
												"comparison": 0,
												"value": "YES"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 165546471867728,
											"parameters": {
												"instance-variable": "currentAngle",
												"value": "Player.IN_Move_Angle"
											}
										}
									],
									"sid": 273981736477435
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 826910594556217
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 111100411726404,
											"parameters": {
												"instance-variable": "IN_Aim",
												"comparison": 0,
												"value": "YES"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 263228608253627,
											"parameters": {
												"instance-variable": "currentAngle",
												"value": "Player.IN_Aim_Angle"
											}
										}
									],
									"sid": 956668401045789
								},
								{
									"eventType": "comment",
									"text": "Switch animation according to player aim/movement angle"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 758770063574639,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "-60",
												"second-angle": "60"
											}
										}
									],
									"actions": [
										{
											"customAction": "updateAnimation",
											"objectClass": "Player",
											"sid": 838508592014433,
											"parameters": [
												"ANIM_Right"
											]
										}
									],
									"sid": 915501844255090
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 831911820288685
										},
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 822189485544097,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "120",
												"second-angle": "240"
											}
										}
									],
									"actions": [
										{
											"customAction": "updateAnimation",
											"objectClass": "Player",
											"sid": 830805725487852,
											"parameters": [
												"ANIM_Left"
											]
										}
									],
									"sid": 549894984114399
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 384224403397944
										},
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 979477917939749,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "240",
												"second-angle": "300"
											}
										}
									],
									"actions": [
										{
											"customAction": "updateAnimation",
											"objectClass": "Player",
											"sid": 919023260779651,
											"parameters": [
												"ANIM_Up"
											]
										}
									],
									"sid": 630016437971469
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 491513802910329
										},
										{
											"id": "is-between-angles",
											"objectClass": "System",
											"sid": 314930774818609,
											"parameters": {
												"angle": "Player.currentAngle",
												"first-angle": "60",
												"second-angle": "120"
											}
										}
									],
									"actions": [
										{
											"customAction": "updateAnimation",
											"objectClass": "Player",
											"sid": 213105470600174,
											"parameters": [
												"ANIM_Down"
											]
										}
									],
									"sid": 639238783630891
								},
								{
									"eventType": "comment",
									"text": "Do movement if needed"
								},
								{
									"eventType": "variable",
									"name": "movementSpeed",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 226228531536649
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 522652247351482,
											"parameters": {
												"instance-variable": "IN_Move",
												"comparison": 0,
												"value": "YES"
											}
										}
									],
									"actions": [],
									"sid": 668689675771412,
									"children": [
										{
											"eventType": "comment",
											"text": "Calculate movement speed: normal / carrying + additional slow effect if needed"
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 714247914525777,
													"parameters": {
														"variable": "movementSpeed",
														"value": "Player.boxUID = NOTHING ? Player.R_MovementSpeed_Normal : Player.R_MovementSpeed_Slow"
													}
												}
											],
											"sid": 390250577880496
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "Player",
													"sid": 745498911146153,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "TIMER_Player_Slow"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 409235339234797,
													"parameters": {
														"variable": "movementSpeed",
														"value": "movementSpeed * Functions.Config_getNumber(PARAM_Item_Slow_Factor)"
													}
												}
											],
											"sid": 141143617397989
										},
										{
											"eventType": "comment",
											"text": "If player is aiming, set movement speed to 0"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 571170445687444,
													"parameters": {
														"instance-variable": "IN_Aim",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 671533407268831,
													"parameters": {
														"variable": "movementSpeed",
														"value": "0"
													}
												}
											],
											"sid": 195706109012047
										},
										{
											"eventType": "comment",
											"text": "Move player and damage them with dt"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 186000139339094,
													"parameters": {
														"variable": "movementSpeed",
														"comparison": 1,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"customAction": "changeHealth",
													"objectClass": "Player",
													"sid": 353380711709495,
													"parameters": [
														"-dt",
														"NO",
														"NO"
													]
												},
												{
													"id": "set-vector-x",
													"objectClass": "Player",
													"sid": 900785635261042,
													"behaviorType": "8Direction",
													"parameters": {
														"vector-x": "cos(Player.IN_Move_Angle) * movementSpeed"
													}
												},
												{
													"id": "set-vector-y",
													"objectClass": "Player",
													"sid": 459433880576684,
													"behaviorType": "8Direction",
													"parameters": {
														"vector-y": "sin(Player.IN_Move_Angle) * movementSpeed"
													}
												}
											],
											"sid": 431832818834294
										},
										{
											"eventType": "comment",
											"text": "If player is not carrying a box, use normal animation speed"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 438115036615129,
													"parameters": {
														"instance-variable": "boxUID",
														"comparison": 0,
														"value": "NOTHING"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation-speed",
													"objectClass": "bbPlayer",
													"sid": 617513023531715,
													"parameters": {
														"speed": "C_Player_AnimationSpeed"
													}
												}
											],
											"sid": 310912418169011
										},
										{
											"eventType": "comment",
											"text": "If player is carrying a box, use slowed down animation speed"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 716913166347913
												}
											],
											"actions": [
												{
													"id": "set-animation-speed",
													"objectClass": "bbPlayer",
													"sid": 164242738441361,
													"parameters": {
														"speed": "C_Player_AnimationSpeed * (Player.R_MovementSpeed_Slow / Player.R_MovementSpeed_Normal)"
													}
												}
											],
											"sid": 928367888274778
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If player is not moving, stop & switch to standing frame"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 705180349057804,
											"parameters": {
												"variable": "movementSpeed",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "Player",
											"sid": 374355007786071,
											"behaviorType": "8Direction"
										},
										{
											"id": "set-animation-frame",
											"objectClass": "bbPlayer",
											"sid": 315124838529181,
											"parameters": {
												"frame-number": "FRAME_Standing"
											}
										}
									],
									"sid": 705863366586606
								},
								{
									"eventType": "comment",
									"text": "If player has a box, update it's position & angle"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 723255104943244,
											"parameters": {
												"child": "Box",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "Box",
											"sid": 627260830318683,
											"parameters": {
												"x": "Player.X + cos(anglelerp(angle(Player.X, Player.Y, Self.X, Self.Y), Player.currentAngle, 0.2)) * Player.R_Box_Distance",
												"y": "Player.Y + sin(anglelerp(angle(Player.X, Player.Y, Self.X, Self.Y), Player.currentAngle, 0.2)) * Player.R_Box_Distance"
											}
										},
										{
											"id": "set-angle",
											"objectClass": "Box",
											"sid": 525203394453657,
											"parameters": {
												"angle": "anglelerp(Self.Angle, Player.currentAngle, 0.2)"
											}
										}
									],
									"sid": 257552961918341
								}
							]
						},
						{
							"eventType": "comment",
							"text": "todo_optimize updates"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UI_TextSF",
									"sid": 625230514664785,
									"parameters": {
										"instance-variable": "role",
										"comparison": 0,
										"value": "ROLE_PlayerHealth"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "UI_TextSF",
									"sid": 842627023051821,
									"parameters": {
										"instance-variable": "paramNumber",
										"comparison": 0,
										"value": "Player.playerId"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "UI_TextSF",
									"sid": 958917751724022,
									"parameters": {
										"text": "\"[color=#\" & trim(tokenat(C_CSV_ColorsHex, Player.playerId, \",\")) & \"][scale=0.25]Health[/scale]\" & newline & Functions.roundToDpPad(Player.health, 1)"
									}
								}
							],
							"sid": 480974457383309
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "spawn",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "sourcePlayerId",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 239190733849133
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 773717553376150,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 249425168367692,
							"parameters": {
								"variable": "hasLevelEnded",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [
						{
							"callFunction": "playSoundAt",
							"sid": 931726268797243,
							"parameters": [
								"Player.X",
								"Player.Y",
								"SFX_Player_Spawning",
								"1",
								"NO"
							]
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 950569274520008,
							"parameters": {
								"object-to-create": "Player",
								"layer": "LAYER_Shadows",
								"x": "midX",
								"y": "midY",
								"create-hierarchy": true,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 745270294807430,
							"parameters": {
								"instance-variable": "playerId",
								"value": "sourcePlayerId"
							}
						},
						{
							"customAction": "init",
							"objectClass": "Player",
							"sid": 778435541206457
						}
					],
					"sid": 768383302968141
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "onAction",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "sourcePlayerId",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 259019913465708
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 234693284807956,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 922158592789209,
							"parameters": {
								"variable": "hasLevelEnded",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [],
					"sid": 959058724392869,
					"children": [
						{
							"eventType": "comment",
							"text": "If player is already in the game..."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 164938964345186,
									"parameters": {
										"instance-variable": "playerId",
										"comparison": 0,
										"value": "sourcePlayerId"
									}
								}
							],
							"actions": [],
							"sid": 751287020611775,
							"children": [
								{
									"eventType": "comment",
									"text": "If player is not aiming, reveal current tile if possible"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 976635434049825,
											"parameters": {
												"instance-variable": "IN_Aim",
												"comparison": 0,
												"value": "NO"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 453971373624201,
											"parameters": {
												"instance-variable": "boxUID",
												"comparison": 0,
												"value": "NOTHING"
											}
										}
									],
									"actions": [],
									"sid": 111808895593936,
									"children": [
										{
											"eventType": "comment",
											"text": "If player is not waiting for tiles closing"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "Player",
													"sid": 190777344976539,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "TIMER_Tile_Close"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 458647327061236,
													"parameters": {
														"instance-variable": "health",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [],
											"sid": 362773114682863,
											"children": [
												{
													"eventType": "comment",
													"text": "Open new tile"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-animation-playing",
															"objectClass": "Tile",
															"sid": 109492819566986,
															"parameters": {
																"animation": "ANIM_Closed"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "Tile",
															"sid": 817118710528103,
															"parameters": {
																"instance-variable": "playerId",
																"comparison": 0,
																"value": "NOTHING"
															}
														},
														{
															"id": "pick-overlapping-point",
															"objectClass": "System",
															"sid": 791779806987572,
															"parameters": {
																"object": "Tile",
																"x": "Player.X",
																"y": "Player.Y"
															}
														},
														{
															"id": "pick-nearestfurthest",
															"objectClass": "Tile",
															"sid": 406213068455479,
															"parameters": {
																"which": "nearest",
																"x": "Player.X",
																"y": "Player.Y"
															}
														}
													],
													"actions": [],
													"sid": 790732193684268,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "Player",
																	"sid": 312446735581557,
																	"parameters": {
																		"instance-variable": "tileUID1",
																		"comparison": 0,
																		"value": "NOTHING"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "Player",
																	"sid": 929681673322567,
																	"parameters": {
																		"instance-variable": "tileUID1",
																		"value": "Tile.UID"
																	}
																},
																{
																	"customAction": "open",
																	"objectClass": "Tile",
																	"customActionObjectClass": "fTile",
																	"sid": 609629980659360,
																	"parameters": [
																		"Player.playerId"
																	]
																}
															],
															"sid": 448472723217719
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 621827789704234
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "Player",
																	"sid": 535357509194715,
																	"parameters": {
																		"instance-variable": "tileUID2",
																		"comparison": 0,
																		"value": "NOTHING"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "Player",
																	"sid": 149909310673921,
																	"parameters": {
																		"instance-variable": "tileUID2",
																		"value": "Tile.UID"
																	}
																},
																{
																	"customAction": "open",
																	"objectClass": "Tile",
																	"customActionObjectClass": "fTile",
																	"sid": 836897889210427,
																	"parameters": [
																		"Player.playerId"
																	]
																}
															],
															"sid": 144125130128244
														}
													]
												},
												{
													"eventType": "comment",
													"text": "If player has two tiles open, check them for matches"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 377724408039667,
															"parameters": {
																"instance-variable": "tileUID1",
																"comparison": 1,
																"value": "NOTHING"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 879084913341614,
															"parameters": {
																"instance-variable": "tileUID2",
																"comparison": 1,
																"value": "NOTHING"
															}
														}
													],
													"actions": [
														{
															"customAction": "checkTiles",
															"objectClass": "Player",
															"sid": 867874135325465
														}
													],
													"sid": 639595947758871
												}
											]
										}
									],
									"isOrBlock": true
								},
								{
									"eventType": "comment",
									"text": "If player is aiming, throw box"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 914299786937799
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 669033149766014,
											"parameters": {
												"instance-variable": "boxUID",
												"comparison": 1,
												"value": "NOTHING"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 507822679436072,
											"parameters": {
												"child": "Box",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"callFunction": "playSoundAt",
											"sid": 674062608972525,
											"parameters": [
												"Cannon.X",
												"Cannon.Y",
												"SFX_Player_Box_Throw",
												"4",
												"NO"
											]
										},
										{
											"id": "remove-child",
											"objectClass": "Player",
											"sid": 204207431993616,
											"parameters": {
												"child": "Box"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 427213169046777,
											"parameters": {
												"instance-variable": "boxUID",
												"value": "NOTHING"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "Box",
											"sid": 277994546434290,
											"behaviorType": "Bullet",
											"parameters": {
												"state": "enabled"
											}
										},
										{
											"id": "set-speed",
											"objectClass": "Box",
											"sid": 670842074844383,
											"behaviorType": "Bullet",
											"parameters": {
												"speed": "Player.R_Box_MovementSpeed"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "Box",
											"sid": 290877799690657,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "Self.R_OverlapCheckTIme",
												"type": "regular",
												"tag": "TIMER_Box_FarCheck"
											}
										}
									],
									"sid": 176047121358229
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If player is not in the game yet, spawn them"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 203965722346315
								}
							],
							"actions": [],
							"sid": 247675588809668,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 122132850489882,
											"parameters": {
												"object": "Player"
											}
										}
									],
									"actions": [],
									"sid": 425566961114310
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 834201085330211
										}
									],
									"actions": [
										{
											"callFunction": "startLevel",
											"sid": 464613185314102
										}
									],
									"sid": 174460840525440
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"customAction": "spawn",
											"objectClass": "Player",
											"sid": 560342928416555,
											"parameters": [
												"sourcePlayerId"
											]
										}
									],
									"sid": 457716652070211
								}
							]
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "onAction_test_todoRemove",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "sourcePlayerId",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 727959400368586
				},
				{
					"name": "reveal",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 496479420636709
				},
				{
					"name": "throw",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 859809251534356
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 606721238675611,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 561604780375059,
							"parameters": {
								"variable": "hasLevelEnded",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [],
					"sid": 881065173642350,
					"children": [
						{
							"eventType": "comment",
							"text": "If player is already in the game..."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 569736929068379,
									"parameters": {
										"instance-variable": "playerId",
										"comparison": 0,
										"value": "sourcePlayerId"
									}
								}
							],
							"actions": [],
							"sid": 552984924728277,
							"children": [
								{
									"eventType": "comment",
									"text": "If player is not aiming, reveal current tile if possible"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 113113788589610,
											"disabled": true,
											"parameters": {
												"instance-variable": "IN_Aiming_todoRemove",
												"comparison": 0,
												"value": "NO"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 709010473303849,
											"parameters": {
												"variable": "reveal",
												"comparison": 0,
												"value": "YES"
											}
										}
									],
									"actions": [],
									"sid": 529649720427290,
									"children": [
										{
											"eventType": "comment",
											"text": "If player is not waiting for tiles closing"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "Player",
													"sid": 690933066821050,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "TIMER_Tile_Close"
													},
													"isInverted": true
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 807178000748250,
													"parameters": {
														"instance-variable": "health",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [],
											"sid": 924320719748854,
											"children": [
												{
													"eventType": "comment",
													"text": "Open new tile"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-animation-playing",
															"objectClass": "Tile",
															"sid": 255164554602396,
															"parameters": {
																"animation": "ANIM_Closed"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "Tile",
															"sid": 540596669079591,
															"parameters": {
																"instance-variable": "playerId",
																"comparison": 0,
																"value": "NOTHING"
															}
														},
														{
															"id": "pick-overlapping-point",
															"objectClass": "System",
															"sid": 137084942280269,
															"parameters": {
																"object": "Tile",
																"x": "Player.X",
																"y": "Player.Y"
															}
														},
														{
															"id": "pick-nearestfurthest",
															"objectClass": "Tile",
															"sid": 579043267815205,
															"parameters": {
																"which": "nearest",
																"x": "Player.X",
																"y": "Player.Y"
															}
														}
													],
													"actions": [],
													"sid": 923930691599800,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-instance-variable",
																	"objectClass": "Player",
																	"sid": 473955089563984,
																	"parameters": {
																		"instance-variable": "tileUID1",
																		"comparison": 0,
																		"value": "NOTHING"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "Player",
																	"sid": 523126616331611,
																	"parameters": {
																		"instance-variable": "tileUID1",
																		"value": "Tile.UID"
																	}
																},
																{
																	"customAction": "open",
																	"objectClass": "Tile",
																	"customActionObjectClass": "fTile",
																	"sid": 925327125153512,
																	"parameters": [
																		"Player.playerId"
																	]
																}
															],
															"sid": 465090437947019
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 149819937538793
																},
																{
																	"id": "compare-instance-variable",
																	"objectClass": "Player",
																	"sid": 539941809502308,
																	"parameters": {
																		"instance-variable": "tileUID2",
																		"comparison": 0,
																		"value": "NOTHING"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-instvar-value",
																	"objectClass": "Player",
																	"sid": 885319181543482,
																	"parameters": {
																		"instance-variable": "tileUID2",
																		"value": "Tile.UID"
																	}
																},
																{
																	"customAction": "open",
																	"objectClass": "Tile",
																	"customActionObjectClass": "fTile",
																	"sid": 103297696474556,
																	"parameters": [
																		"Player.playerId"
																	]
																}
															],
															"sid": 327474171125052
														}
													]
												},
												{
													"eventType": "comment",
													"text": "If player has two tiles open, check them for matches"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 131581363579734,
															"parameters": {
																"instance-variable": "tileUID1",
																"comparison": 1,
																"value": "NOTHING"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "Player",
															"sid": 841001642667954,
															"parameters": {
																"instance-variable": "tileUID2",
																"comparison": 1,
																"value": "NOTHING"
															}
														}
													],
													"actions": [
														{
															"customAction": "checkTiles",
															"objectClass": "Player",
															"sid": 127497033321482
														}
													],
													"sid": 232413546235510
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If player is aiming, throw box"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 186082025266502,
											"disabled": true
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 434170667910194,
											"parameters": {
												"variable": "throw",
												"comparison": 0,
												"value": "YES"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 435373003178999,
											"parameters": {
												"instance-variable": "boxUID",
												"comparison": 1,
												"value": "NOTHING"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 834883071027863,
											"parameters": {
												"child": "Box",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"callFunction": "playSoundAt",
											"sid": 252067511859087,
											"parameters": [
												"Cannon.X",
												"Cannon.Y",
												"SFX_Player_Box_Throw",
												"4",
												"NO"
											]
										},
										{
											"id": "remove-child",
											"objectClass": "Player",
											"sid": 491119152664821,
											"parameters": {
												"child": "Box"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 783619446444714,
											"parameters": {
												"instance-variable": "boxUID",
												"value": "NOTHING"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "Box",
											"sid": 836620181653792,
											"behaviorType": "Bullet",
											"parameters": {
												"state": "enabled"
											}
										},
										{
											"id": "set-speed",
											"objectClass": "Box",
											"sid": 270425235560542,
											"behaviorType": "Bullet",
											"parameters": {
												"speed": "Player.R_Box_MovementSpeed"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "Box",
											"sid": 943452773430122,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "Self.R_OverlapCheckTIme",
												"type": "regular",
												"tag": "TIMER_Box_FarCheck"
											}
										}
									],
									"sid": 213372334382695
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If player is not in the game yet, spawn them"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 896506299151968
								}
							],
							"actions": [],
							"sid": 646701036443106,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 385312629313365,
											"parameters": {
												"object": "Player"
											}
										}
									],
									"actions": [],
									"sid": 550064510087839
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 111101359394663
										}
									],
									"actions": [
										{
											"callFunction": "startLevel",
											"sid": 967420526709378
										}
									],
									"sid": 301617567503601
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"customAction": "spawn",
											"objectClass": "Player",
											"sid": 587144146032255,
											"parameters": [
												"sourcePlayerId"
											]
										}
									],
									"sid": 474734743907356
								}
							]
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "checkTiles",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 271357122283101,
			"children": [
				{
					"eventType": "variable",
					"name": "healAmount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 282041672747686
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Tile",
							"sid": 115906198600461,
							"parameters": {
								"unique-id": "Player.tileUID1"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "fTile",
							"sid": 487887627285496,
							"parameters": {
								"unique-id": "Player.tileUID2"
							}
						}
					],
					"actions": [],
					"sid": 914667370152696,
					"children": [
						{
							"eventType": "comment",
							"text": "If symbols match..."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Tile",
									"sid": 444010377632060,
									"parameters": {
										"instance-variable": "symbol",
										"comparison": 0,
										"value": "fTile.symbol"
									}
								}
							],
							"actions": [
								{
									"customAction": "remove",
									"objectClass": "Tile",
									"customActionObjectClass": "fTile",
									"sid": 610506249939683
								},
								{
									"customAction": "remove",
									"objectClass": "fTile",
									"sid": 847277258622668
								},
								{
									"id": "add-to-instvar",
									"objectClass": "Player",
									"sid": 140197894115624,
									"parameters": {
										"instance-variable": "pairsFound",
										"value": "1"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 151236500655693,
									"parameters": {
										"variable": "pairsFound",
										"value": "1"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 778835255933920,
									"parameters": {
										"variable": "healAmount",
										"value": "Player.R_Health_BonusOnPair"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 181145534061699,
									"parameters": {
										"instance-variable": "tileUID1",
										"value": "NOTHING"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 546557595528095,
									"parameters": {
										"instance-variable": "tileUID2",
										"value": "NOTHING"
									}
								}
							],
							"sid": 671774862284893,
							"children": [
								{
									"eventType": "comment",
									"text": "If symbol is an item..."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 321219722387016,
											"parameters": {
												"object": "Tile",
												"expression": "int(Tile.symbol)",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 228569953273772,
									"children": [
										{
											"eventType": "comment",
											"text": "If item is health, heal immediately"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Tile",
													"sid": 211905526062728,
													"parameters": {
														"instance-variable": "symbol",
														"comparison": 0,
														"value": "IT_Health"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 952205922533722,
													"parameters": {
														"variable": "healAmount",
														"value": "Player.R_Health_BonusOnHeal"
													}
												}
											],
											"sid": 664699140082146
										},
										{
											"eventType": "comment",
											"text": "Otherwise pick up item"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 353242779660125
												}
											],
											"actions": [
												{
													"customAction": "spawn",
													"objectClass": "Box",
													"sid": 329378041470016,
													"parameters": [
														"fTile.X",
														"fTile.Y",
														"fTile.symbol"
													]
												},
												{
													"callFunction": "playSoundAt",
													"sid": 296178413922393,
													"parameters": [
														"fTile.X",
														"fTile.Y",
														"SFX_Player_Pair_Item",
														"4",
														"NO"
													]
												}
											],
											"sid": 295692662093343
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If symbol is not an item..."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 286484873808070
										}
									],
									"actions": [
										{
											"callFunction": "playSoundAt",
											"sid": 596742013105906,
											"parameters": [
												"fTile.X",
												"fTile.Y",
												"SFX_Player_Pair_Symbol",
												"4",
												"NO"
											]
										}
									],
									"sid": 126097389903810
								},
								{
									"eventType": "comment",
									"text": "Check win condition"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 881356715882633,
											"parameters": {
												"variable": "pairsFound",
												"comparison": 5,
												"value": "pairsTotal"
											}
										}
									],
									"actions": [
										{
											"callFunction": "endLevel",
											"sid": 994755527730502
										}
									],
									"sid": 834295830116317
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If symbols don't match, start close timer"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 482617275684659
								}
							],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 618439747426148,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "C_Tile_Reveal_Time",
										"type": "once",
										"tag": "TIMER_Tile_Close"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "Tile",
									"sid": 291780139570239,
									"disabled": true,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "C_Tile_Reveal_Time",
										"type": "once",
										"tag": "TIMER_Tile_Close"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "fTile",
									"sid": 538840826866904,
									"disabled": true,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "C_Tile_Reveal_Time",
										"type": "once",
										"tag": "TIMER_Tile_Close"
									}
								}
							],
							"sid": 515965583084604
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 237116541539317,
							"parameters": {
								"variable": "healAmount",
								"comparison": 1,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"customAction": "changeHealth",
							"objectClass": "Player",
							"sid": 198131085194200,
							"parameters": [
								"healAmount",
								"YES",
								"YES"
							]
						}
					],
					"sid": 813979145568860
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "changeHealth",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "amount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 788125484134714
				},
				{
					"name": "withVisual",
					"type": "number",
					"initialValue": "1",
					"comment": "",
					"sid": 475508187527007
				},
				{
					"name": "withAudio",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 565011835886277
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 876028868693683,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 327557588605853,
							"parameters": {
								"instance-variable": "isDead",
								"comparison": 0,
								"value": "NO"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 773203129610748,
							"parameters": {
								"variable": "amount",
								"comparison": 1,
								"value": "0"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "Player",
							"sid": 141910721491267,
							"parameters": {
								"child": "bbPlayer",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 574291861658071,
							"parameters": {
								"instance-variable": "health",
								"value": "max(Self.health + amount, 0)"
							}
						}
					],
					"sid": 805586119650287,
					"children": [
						{
							"eventType": "comment",
							"text": "If player is out of health, kill them"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 967729235063675,
									"parameters": {
										"instance-variable": "health",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "stop-timer",
									"objectClass": "Player",
									"sid": 584735293532447,
									"disabled": true,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "TIMER_Tile_Close"
									}
								},
								{
									"callFunction": "playSoundAt",
									"sid": 540507342436482,
									"parameters": [
										"Player.X",
										"Player.Y",
										"SFX_Player_Dead",
										"1",
										"NO"
									]
								},
								{
									"id": "stop-all-timers",
									"objectClass": "Player",
									"sid": 165312402361854,
									"behaviorType": "Timer"
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 301099852662800,
									"parameters": {
										"type": "log",
										"message": "\"Player \" & Player.playerId & \" ran out of time.\""
									}
								},
								{
									"customAction": "updateAnimation",
									"objectClass": "Player",
									"sid": 335316664388213,
									"parameters": [
										"ANIM_Dead"
									]
								},
								{
									"id": "set-enabled",
									"objectClass": "Player",
									"sid": 973141152181811,
									"behaviorType": "8Direction",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "Player",
									"sid": 464935520737221,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 694427364425658,
									"parameters": {
										"instance-variable": "isDead",
										"value": "YES"
									}
								}
							],
							"sid": 696078194109802,
							"children": [
								{
									"eventType": "comment",
									"text": "Close tiles opened by player"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Tile",
											"sid": 192365626001959,
											"parameters": {
												"instance-variable": "playerId",
												"comparison": 0,
												"value": "Player.playerId"
											}
										}
									],
									"actions": [
										{
											"customAction": "close",
											"objectClass": "Tile",
											"customActionObjectClass": "fTile",
											"sid": 745359442238477
										}
									],
									"sid": 483595673687544
								},
								{
									"eventType": "comment",
									"text": "Remove box from player (so it can be picked up by others)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 267413859436160,
											"parameters": {
												"child": "Box",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "remove-from-parent",
											"objectClass": "Box",
											"sid": 926565569437107
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Box",
											"sid": 569943464926341,
											"parameters": {
												"instance-variable": "carrierPlayerUID",
												"value": "NOTHING"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Box",
											"sid": 890959477436508,
											"parameters": {
												"instance-variable": "targetPlayerUID",
												"value": "NOTHING"
											}
										}
									],
									"sid": 443655740833957
								},
								{
									"eventType": "comment",
									"text": "Check if there are any other non-dead players"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 852965188782884,
											"parameters": {
												"object": "Player"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 604236896194652,
											"parameters": {
												"instance-variable": "isDead",
												"comparison": 0,
												"value": "NO"
											}
										}
									],
									"actions": [],
									"sid": 435082830479427
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 255908445233527
										}
									],
									"actions": [
										{
											"callFunction": "endLevel",
											"sid": 979852464736910
										}
									],
									"sid": 373681461283394
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Otherwise, heal / damage"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 758337615578536
								}
							],
							"actions": [],
							"sid": 828999726862885,
							"children": [
								{
									"eventType": "comment",
									"text": "Heal effects"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 367123911441553,
											"parameters": {
												"variable": "amount",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 702213241185155,
											"disabled": true,
											"parameters": {
												"type": "log",
												"message": "\"Player healing: \" & amount"
											}
										}
									],
									"sid": 441298887542454,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 205556970991645,
													"parameters": {
														"variable": "withVisual",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [
												{
													"customAction": "spawnBlurb",
													"objectClass": "Player",
													"customActionObjectClass": "fBlurbSpawners",
													"sid": 105407526784630,
													"parameters": [
														"\"+\" & roundToDp(amount, 1) & \" HP\"",
														"Self.R_Blurb_ZOffset",
														"rgbEx(0, 100, 0)",
														"0.8"
													]
												}
											],
											"sid": 925580011800668
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 590414564636526,
													"parameters": {
														"variable": "withAudio",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [],
											"sid": 704714736328741,
											"children": [
												{
													"eventType": "comment",
													"text": "Big heal SFX"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 359273419115885,
															"parameters": {
																"variable": "amount",
																"comparison": 4,
																"value": "Player.R_Health_BonusOnPair"
															}
														}
													],
													"actions": [
														{
															"callFunction": "playSoundAt",
															"sid": 120844195377124,
															"parameters": [
																"Player.X",
																"Player.Y",
																"SFX_Player_Healing_Big",
																"4",
																"NO"
															]
														}
													],
													"sid": 456321609126089
												},
												{
													"eventType": "comment",
													"text": "Small heal SFX"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 200536049241896
														}
													],
													"actions": [
														{
															"callFunction": "playSoundAt",
															"sid": 567467725170363,
															"parameters": [
																"Player.X",
																"Player.Y",
																"SFX_Player_Healing_Small",
																"4",
																"NO"
															]
														}
													],
													"sid": 670579422108555
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Damage effects & start invincibility"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 681706711315649
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 366574826359886,
											"parameters": {
												"variable": "amount",
												"comparison": 2,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 339131046921965,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 759969072814681,
													"parameters": {
														"variable": "withVisual",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [
												{
													"id": "tween-value",
													"objectClass": "bbPlayer",
													"sid": 313587269940289,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "TWEEN_Player_Hurt",
														"start-value": "400",
														"end-value": "0",
														"time": "0.5",
														"ease": "easeoutcubic",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"customAction": "spawnBlurb",
													"objectClass": "Player",
													"customActionObjectClass": "fBlurbSpawners",
													"sid": 106892411860645,
													"parameters": [
														"str(roundToDp(amount, 1)) & \" HP\"",
														"Self.R_Blurb_ZOffset",
														"rgbEx(100, 0, 0)",
														"0.8"
													]
												}
											],
											"sid": 383220370776839
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 631983889268585,
													"parameters": {
														"variable": "withAudio",
														"comparison": 0,
														"value": "YES"
													}
												}
											],
											"actions": [
												{
													"callFunction": "playSoundAt",
													"sid": 979762829351844,
													"parameters": [
														"Player.X",
														"Player.Y",
														"SFX_Player_Damaged",
														"4",
														"NO"
													]
												}
											],
											"sid": 724703805395080
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "closeTiles",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 323014139554089,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Tile",
							"sid": 716484355461441,
							"parameters": {
								"unique-id": "Player.tileUID1"
							}
						}
					],
					"actions": [
						{
							"customAction": "close",
							"objectClass": "Tile",
							"customActionObjectClass": "fTile",
							"sid": 256468709778806
						}
					],
					"sid": 850100583965396
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Tile",
							"sid": 451585866593051,
							"parameters": {
								"unique-id": "Player.tileUID2"
							}
						}
					],
					"actions": [
						{
							"customAction": "close",
							"objectClass": "Tile",
							"customActionObjectClass": "fTile",
							"sid": 364559990204727
						}
					],
					"sid": 233600067202867
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 997507963423812,
							"parameters": {
								"instance-variable": "tileUID1",
								"value": "NOTHING"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 155399988889392,
							"parameters": {
								"instance-variable": "tileUID2",
								"value": "NOTHING"
							}
						}
					],
					"sid": 650097116534947
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "startEffect",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "itemType",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 458212392066247
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 125086337551078,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 513824044455216,
							"parameters": {
								"variable": "itemType",
								"comparison": 0,
								"value": "IT_Sleep"
							}
						}
					],
					"actions": [
						{
							"callFunction": "playSoundAt",
							"sid": 271734195145716,
							"parameters": [
								"Player.X",
								"Player.Y",
								"SFX_Player_Sleeping",
								"1",
								"NO"
							]
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 487840665438905,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Functions.Config_getNumber(PARAM_Item_Sleep_Time)",
								"type": "once",
								"tag": "TIMER_Player_Sleep"
							}
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 408474461151307,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Functions.Config_getNumber(PARAM_Item_Sleep_Time) - C_Player_WakeTime",
								"type": "once",
								"tag": "TIMER_Player_WakingUp"
							}
						},
						{
							"customAction": "updateAnimation",
							"objectClass": "Player",
							"sid": 574620748116242,
							"parameters": [
								"ANIM_Sleeping"
							]
						}
					],
					"sid": 242113141302686
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 323094733363609,
							"parameters": {
								"variable": "itemType",
								"comparison": 0,
								"value": "IT_Slow"
							}
						}
					],
					"actions": [
						{
							"callFunction": "playSoundAt",
							"sid": 783468937313124,
							"parameters": [
								"Player.X",
								"Player.Y",
								"SFX_Player_Slowing",
								"1",
								"NO"
							]
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 182757126736893,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Functions.Config_getNumber(PARAM_Item_Slow_Time)",
								"type": "once",
								"tag": "TIMER_Player_Slow"
							}
						}
					],
					"sid": 650699818577864,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 575784273237517,
									"parameters": {
										"child": "Particles",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-rate",
									"objectClass": "Particles",
									"sid": 642395338870302,
									"parameters": {
										"rate": "0"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "Particles",
									"sid": 686998409429202,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Particles.Timeout",
										"type": "once",
										"tag": "TIMER_Particles_Destroy"
									}
								}
							],
							"sid": 820694317166512
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Player",
									"sid": 760134916024210,
									"parameters": {
										"object": "Particles",
										"layer": "LAYER_Billboards",
										"image-point": "0",
										"create-hierarchy": false,
										"template-name": "IT_Slow"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Player",
									"sid": 154609494094139,
									"parameters": {
										"child": "Particles",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								}
							],
							"sid": 677930493949892
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "updateAnimation",
			"objectClass": "Player",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "animationName",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 961442772629077
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 590559724811412,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 895449563551729,
							"parameters": {
								"instance-variable": "isDead",
								"comparison": 0,
								"value": "NO"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "Player",
							"sid": 865024316998841,
							"parameters": {
								"child": "bbPlayer",
								"which": "own"
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "bbPlayer",
							"sid": 797735980396482,
							"parameters": {
								"animation": "Self.playerId & \"_\" & animationName"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 122305314122008,
							"disabled": true,
							"parameters": {
								"type": "log",
								"message": "\"Setting animation of player #\" & Player.playerId & \" to \" & (Player.playerId & \"_\" & animationName)"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "bbPlayer",
							"sid": 700344016102452,
							"parameters": {
								"animation": "Self.playerId & \"_\" & animationName",
								"from": "beginning"
							}
						}
					],
					"sid": 437791455581839
				}
			]
		}
	],
	"sid": 183802187831019
}