{
	"name": "aCannon ðŸ’¥",
	"events": [
		{
			"aceType": "action",
			"aceName": "spawnAll",
			"objectClass": "Cannon",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 799452279524543,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "repeat",
							"objectClass": "System",
							"sid": 968358049106647,
							"parameters": {
								"count": "Functions.Config_getNumber(PARAM_Cannon_Count_Init)"
							}
						}
					],
					"actions": [
						{
							"customAction": "spawn",
							"objectClass": "Cannon",
							"sid": 221999060392936
						}
					],
					"sid": 296294398056226
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "spawn",
			"objectClass": "Cannon",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "todo make sure cannons don't spawn on top of / too near each other"
				},
				{
					"type": "comment",
					"text": "todo fix spawn position flash crap"
				}
			],
			"sid": 435920396597194,
			"children": [
				{
					"eventType": "variable",
					"name": "cannonCount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 747314110742028
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-all",
							"objectClass": "System",
							"sid": 559544847403718,
							"parameters": {
								"object": "Cannon"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Cannon",
							"sid": 970669870398454,
							"parameters": {
								"instance-variable": "health",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 232041345314384,
							"parameters": {
								"variable": "cannonCount",
								"value": "Cannon.PickedCount"
							}
						}
					],
					"sid": 988071772823657
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 698108850538855,
							"parameters": {
								"variable": "cannonCount",
								"comparison": 2,
								"value": "Functions.Config_getNumber(PARAM_Cannon_Count_Max)"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 573811177175989,
							"parameters": {
								"object-to-create": "Cannon",
								"layer": "LAYER_Main",
								"x": "midX",
								"y": "midY",
								"create-hierarchy": true,
								"template-name": "\"\""
							}
						},
						{
							"callFunction": "playSoundAt",
							"sid": 987182644903882,
							"parameters": [
								"Cannon.X",
								"Cannon.Y",
								"SFX_Cannon_Spawn",
								"1",
								"NO"
							]
						},
						{
							"customAction": "init",
							"objectClass": "Cannon",
							"sid": 808091721845568
						}
					],
					"sid": 151165711030697
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "init",
			"objectClass": "Cannon",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 519383514606256,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Override parameters if needed"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 657460902464411,
							"parameters": {
								"instance-variable": "R_Projectile_MovementSpeed",
								"value": "Functions.Config_getNumber(PARAM_Projectile_Speed)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 889708255347274,
							"parameters": {
								"instance-variable": "R_Projectile_MovementSpeed_Increase",
								"value": "Functions.Config_getNumber(PARAM_Projectile_Speed_Increase)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 307923832479006,
							"parameters": {
								"instance-variable": "R_Projectile_MovementSpeed_Max",
								"value": "Functions.Config_getNumber(PARAM_Projectile_Speed_Max)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 115716986810886,
							"parameters": {
								"instance-variable": "R_Shoot_Interval_Min",
								"value": "Functions.Config_getNumber(PARAM_Projectile_SpawnTime_Min)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 685966481005167,
							"parameters": {
								"instance-variable": "R_Shoot_Interval_Max",
								"value": "Functions.Config_getNumber(PARAM_Projectile_SpawnTime_Max)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 539911240897390,
							"parameters": {
								"instance-variable": "R_Health_Max",
								"value": "Functions.Config_getNumber(PARAM_Cannon_Health)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 406698769783426,
							"parameters": {
								"instance-variable": "R_Acceleration",
								"value": "Functions.Config_getNumber(PARAM_Cannon_Acceleration)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 778785234093272,
							"parameters": {
								"instance-variable": "R_Speed_Max",
								"value": "Functions.Config_getNumber(PARAM_Cannon_SpeedMax)"
							}
						},
						{
							"type": "comment",
							"text": "Initialize projectile spawner"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 693014011184497,
							"parameters": {
								"instance-variable": "health",
								"value": "Self.R_Health_Max"
							}
						},
						{
							"id": "set-target",
							"objectClass": "Cannon",
							"sid": 893274077709060,
							"behaviorType": "Orbit",
							"parameters": {
								"x": "midX",
								"y": "midY"
							}
						},
						{
							"id": "set-rotation",
							"objectClass": "Cannon",
							"sid": 524731541822125,
							"behaviorType": "Orbit",
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"id": "set-radius",
							"objectClass": "Cannon",
							"sid": 473121404867559,
							"behaviorType": "Orbit",
							"parameters": {
								"primary": "distance(0, 0, midX, midY) + C_Tile_Size",
								"secondary": "distance(0, 0, midX, midY) + C_Tile_Size"
							}
						},
						{
							"id": "set-radius",
							"objectClass": "Cannon",
							"sid": 346185206583608,
							"disabled": true,
							"behaviorType": "Orbit",
							"parameters": {
								"primary": "(distance(0, 0, midX, midY) + C_Tile_Size * 2) * 0.5",
								"secondary": "(distance(0, 0, midX, midY) + C_Tile_Size * 2) * 0.5"
							}
						},
						{
							"customAction": "startShootTimer",
							"objectClass": "Cannon",
							"sid": 795394196873268
						},
						{
							"customAction": "startMoving",
							"objectClass": "Cannon",
							"sid": 437806578770828
						}
					],
					"sid": 810463059339353
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-children",
							"objectClass": "Cannon",
							"sid": 153214093981769,
							"parameters": {
								"child": "3dCannon",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-face-object",
							"objectClass": "3dCannon",
							"sid": 584776906794173,
							"parameters": {
								"face": "bottom",
								"object": "txCannonIdle"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "3dCannon",
							"sid": 818551646326965,
							"disabled": true,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "todo macro, mn"
						},
						{
							"id": "set-z-elevation",
							"objectClass": "3dCannon",
							"sid": 135155721488443,
							"parameters": {
								"z": "-Self.ZHeight - 1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "3dCannon",
							"sid": 117850340924268,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ZElevation\"",
								"property": "offsetZElevation",
								"end-value": "0",
								"time": "4",
								"ease": "easeoutbounce",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 584432900882151
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "shoot",
			"objectClass": "Cannon",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 173883774634553,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 757464214803311,
							"parameters": {
								"instance-variable": "health",
								"comparison": 4,
								"value": "0"
							}
						},
						{
							"id": "pick-nearestfurthest",
							"objectClass": "Player",
							"sid": 901508114031172,
							"parameters": {
								"which": "furthest",
								"x": "Cannon.X",
								"y": "Cannon.Y"
							}
						}
					],
					"actions": [
						{
							"customAction": "spawn",
							"objectClass": "Projectile",
							"sid": 196987873204044,
							"parameters": [
								"Cannon.X",
								"Cannon.Y",
								"Player.X",
								"Player.Y",
								"Cannon.R_Projectile_MovementSpeed"
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cannon",
							"sid": 157928397321412,
							"parameters": {
								"instance-variable": "R_Projectile_MovementSpeed",
								"value": "min(Self.R_Projectile_MovementSpeed + Self.R_Projectile_MovementSpeed_Increase, Self.R_Projectile_MovementSpeed_Max)"
							}
						},
						{
							"callFunction": "playSoundAt",
							"sid": 599817348518414,
							"parameters": [
								"Cannon.X",
								"Cannon.Y",
								"SFX_Cannon_Fire",
								"4",
								"NO"
							]
						}
					],
					"sid": 692676499856425
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 127610369337241
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 504311610538907,
							"parameters": {
								"type": "log",
								"message": "\"Cannon has no target\""
							}
						}
					],
					"sid": 175363721439393
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "startMoving",
			"objectClass": "Cannon",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [],
			"sid": 502112530341107,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-acceleration",
							"objectClass": "Cannon",
							"sid": 772188775822377,
							"behaviorType": "Orbit",
							"parameters": {
								"acceleration": "Self.R_Acceleration"
							}
						},
						{
							"id": "start-timer",
							"objectClass": "Cannon",
							"sid": 507838794012651,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "0.1",
								"type": "regular",
								"tag": "TIMER_Cannon_CheckMaxSpeed"
							}
						}
					],
					"sid": 470010014893638
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "startShootTimer",
			"objectClass": "Cannon",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"id": "start-timer",
					"objectClass": "Cannon",
					"sid": 520434317754823,
					"behaviorType": "Timer",
					"parameters": {
						"duration": "random(Self.R_Shoot_Interval_Min, Self.R_Shoot_Interval_Max)",
						"type": "once",
						"tag": "TIMER_Cannon_Shoot"
					}
				}
			],
			"sid": 472290367645562
		},
		{
			"aceType": "action",
			"aceName": "changeHealth",
			"objectClass": "Cannon",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "amount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 275319688986470
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "Cannon",
					"sid": 188319742178471,
					"parameters": {
						"instance-variable": "health",
						"value": "clamp(Self.health + amount, 0, Self.R_Health_Max)"
					}
				}
			],
			"sid": 724590973381787,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Cannon",
							"sid": 803213270746986,
							"parameters": {
								"instance-variable": "health",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "todo"
						},
						{
							"id": "destroy",
							"objectClass": "Cannon",
							"sid": 282781054080346
						},
						{
							"callFunction": "playSoundAt",
							"sid": 532155970255575,
							"parameters": [
								"Cannon.X",
								"Cannon.Y",
								"SFX_Cannon_Destroyed",
								"4",
								"NO"
							]
						}
					],
					"sid": 235621981839580
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 127337758506651
						}
					],
					"actions": [],
					"sid": 935722509976253,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 810118055815569,
									"parameters": {
										"variable": "amount",
										"comparison": 2,
										"value": "0"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "Cannon",
									"sid": 400515157905422,
									"parameters": {
										"child": "3dCannon",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "stop-tweens",
									"objectClass": "3dCannon",
									"sid": 439861624941983,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "TWEEN_3dCannon_Color"
									}
								},
								{
									"id": "set-default-color",
									"objectClass": "3dCannon",
									"sid": 847311774761830,
									"parameters": {
										"color": "rgbEx(100, 0, 0)"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "3dCannon",
									"sid": 477122417862364,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "TWEEN_3dCannon_Color",
										"property": "offsetColor",
										"end-value": "rgbEx(100, 100, 100)",
										"time": "1",
										"ease": "easeoutcubic",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"callFunction": "playSoundAt",
									"sid": 241019643296043,
									"parameters": [
										"Cannon.X",
										"Cannon.Y",
										"SFX_Collision_Box_Cannon",
										"4",
										"NO"
									]
								}
							],
							"sid": 407026718417487
						}
					]
				}
			]
		}
	],
	"sid": 414515668687685
}