{
	"name": "aCamera ðŸŽ¥",
	"events": [
		{
			"aceType": "action",
			"aceName": "spawn",
			"objectClass": "CameraHelper",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "Spawn camera helper, camera target helper & initialize 3D camera"
				}
			],
			"sid": 986035733445233,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 227746216314859,
							"parameters": {
								"object-to-create": "CameraHelper",
								"layer": "LAYER_Shadows",
								"x": "0",
								"y": "0",
								"create-hierarchy": true,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "CameraHelper",
							"sid": 552178286463473,
							"parameters": {
								"z": "Self.R_ZElevationInit"
							}
						},
						{
							"id": "set-position",
							"objectClass": "CameraHelper",
							"sid": 239393060833000,
							"parameters": {
								"x": "midX",
								"y": "Self.R_YInit"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "CameraHelper",
							"sid": 925345598574905,
							"parameters": {
								"instance-variable": "lookTargetX",
								"value": "midX"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "CameraHelper",
							"sid": 594925617436905,
							"parameters": {
								"instance-variable": "lookTargetY",
								"value": "midY"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "CameraHelper",
							"sid": 620846989659559,
							"parameters": {
								"instance-variable": "isMovementEnabled",
								"value": "Functions.Rules_getNumber(PARAM_Camera_Movement)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "CameraHelper",
							"sid": 663161774110655,
							"parameters": {
								"instance-variable": "isRotationEnabled",
								"value": "Functions.Rules_getNumber(PARAM_Camera_Rotation)"
							}
						},
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 962995064909365,
							"parameters": {
								"cam-x": "CameraHelper.X",
								"cam-y": "CameraHelper.Y",
								"cam-z": "CameraHelper.ZElevation",
								"look-x": "CameraHelper.lookTargetX",
								"look-y": "CameraHelper.lookTargetY",
								"look-z": "0",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						},
						{
							"id": "set-field-of-view",
							"objectClass": "3DCamera",
							"sid": 106028134075415,
							"parameters": {
								"fov": "CameraHelper.R_FieldOfView"
							}
						}
					],
					"sid": 339269760463933,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "CameraHelper",
									"sid": 319509648006723,
									"parameters": {
										"child": "CameraTargetHelper",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "CameraTargetHelper",
									"sid": 582117177962288,
									"parameters": {
										"x": "CameraHelper.lookTargetX",
										"y": "CameraHelper.lookTargetY"
									}
								},
								{
									"id": "set-listener-object",
									"objectClass": "Audio",
									"sid": 806640932042479,
									"parameters": {
										"object": "CameraTargetHelper"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "CameraHelper",
									"sid": 902647247257350,
									"parameters": {
										"instance-variable": "lookTargetOffsetX",
										"value": "Self.X - CameraTargetHelper.X"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "CameraHelper",
									"sid": 667092858997632,
									"parameters": {
										"instance-variable": "lookTargetOffsetY",
										"value": "Self.Y - CameraTargetHelper.Y"
									}
								}
							],
							"sid": 963649063793251
						}
					]
				}
			]
		},
		{
			"aceType": "action",
			"aceName": "tick",
			"objectClass": "CameraHelper",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "Update position of camera helper & camera target helper objects, move 3D camera"
				}
			],
			"sid": 584541642494638,
			"children": [
				{
					"eventType": "comment",
					"text": "If camera movement is enabled, move camera target helper (with acceleration/deceleration) towards camera look target position"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "CameraHelper",
							"sid": 230320301216478,
							"parameters": {
								"instance-variable": "isMovementEnabled",
								"comparison": 0,
								"value": "YES"
							}
						}
					],
					"actions": [
						{
							"id": "move-to-position",
							"objectClass": "CameraTargetHelper",
							"sid": 739298301170927,
							"behaviorType": "MoveTo",
							"parameters": {
								"x": "CameraHelper.lookTargetX",
								"y": "CameraHelper.lookTargetY",
								"mode": "direct"
							}
						}
					],
					"sid": 497638812858042,
					"children": [
						{
							"eventType": "variable",
							"name": "playerCount_",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 367870474980476
						},
						{
							"eventType": "comment",
							"text": "If there are players alive on the level..."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 511597492729612,
									"parameters": {
										"instance-variable": "health",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 540981286743701,
									"parameters": {
										"variable": "playerCount_",
										"value": "Player.PickedCount"
									}
								}
							],
							"sid": 309792596173613,
							"children": [
								{
									"eventType": "comment",
									"text": "Calculate average position of alive players and update look target variables of the camera"
								},
								{
									"eventType": "variable",
									"name": "playerXSum",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 670098256827261
								},
								{
									"eventType": "variable",
									"name": "playerYSum",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 286329170254959
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 703310314713793,
											"parameters": {
												"object": "Player"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 262071103948974,
											"parameters": {
												"variable": "playerXSum",
												"value": "Player.X"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 952784572542325,
											"parameters": {
												"variable": "playerYSum",
												"value": "Player.Y"
											}
										}
									],
									"sid": 769265313769787
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "CameraHelper",
											"sid": 598355393996049,
											"parameters": {
												"instance-variable": "lookTargetX",
												"value": "playerXSum / playerCount_"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "CameraHelper",
											"sid": 501321298652285,
											"parameters": {
												"instance-variable": "lookTargetY",
												"value": "playerYSum / playerCount_"
											}
										}
									],
									"sid": 354409601194478
								},
								{
									"eventType": "comment",
									"text": "If camera rotation is enabled, position camera helper with a little \"wobble\""
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "CameraHelper",
											"sid": 826711222675440,
											"parameters": {
												"instance-variable": "isRotationEnabled",
												"comparison": 0,
												"value": "YES"
											}
										}
									],
									"actions": [],
									"sid": 806005541602763,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-x",
													"objectClass": "CameraHelper",
													"sid": 808011106146306,
													"parameters": {
														"comparison": 2,
														"x-co-ordinate": "Self.lookTargetX - Self.R_Movement_Distance_Minimum"
													}
												}
											],
											"actions": [
												{
													"id": "set-x",
													"objectClass": "CameraHelper",
													"sid": 255820770407528,
													"parameters": {
														"x": "Functions.expDecay(Self.X, Self.lookTargetX - Self.R_Movement_Distance_Minimum, 5)"
													}
												}
											],
											"sid": 117658731135502
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-x",
													"objectClass": "CameraHelper",
													"sid": 574425409234978,
													"parameters": {
														"comparison": 4,
														"x-co-ordinate": "Self.lookTargetX + Self.R_Movement_Distance_Minimum"
													}
												}
											],
											"actions": [
												{
													"id": "set-x",
													"objectClass": "CameraHelper",
													"sid": 714074587619238,
													"parameters": {
														"x": "Functions.expDecay(Self.X, Self.lookTargetX + Self.R_Movement_Distance_Minimum, 5)"
													}
												}
											],
											"sid": 796188876636495
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-y",
													"objectClass": "CameraHelper",
													"sid": 453424749258692,
													"parameters": {
														"y": "Functions.expDecay(Self.Y, Self.lookTargetY + Self.R_YInit, 5)"
													}
												}
											],
											"sid": 735110759662358
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If camera rotation is disabled, position camera helper without \"wobble\""
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 658589660808210
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "CameraHelper",
											"sid": 665717021465072,
											"parameters": {
												"x": "CameraTargetHelper.X + CameraHelper.lookTargetOffsetX",
												"y": "CameraTargetHelper.Y + CameraHelper.lookTargetOffsetY"
											}
										}
									],
									"sid": 726492195968418
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "look-at-position",
									"objectClass": "3DCamera",
									"sid": 265678632277576,
									"parameters": {
										"cam-x": "CameraHelper.X",
										"cam-y": "CameraHelper.Y",
										"cam-z": "CameraHelper.ZElevation",
										"look-x": "CameraTargetHelper.X",
										"look-y": "CameraTargetHelper.Y",
										"look-z": "CameraTargetHelper.ZElevation",
										"up-x": "0",
										"up-y": "0",
										"up-z": "1"
									}
								},
								{
									"id": "set-field-of-view",
									"objectClass": "3DCamera",
									"sid": 390050188321812,
									"parameters": {
										"fov": "CameraHelper.R_FieldOfView"
									}
								}
							],
							"sid": 861972277420022
						}
					]
				}
			]
		}
	],
	"sid": 105065436241276
}