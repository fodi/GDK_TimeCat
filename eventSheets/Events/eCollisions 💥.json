{
	"name": "eCollisions ðŸ’¥",
	"events": [
		{
			"eventType": "comment",
			"text": "Player + Projectile"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Player",
					"sid": 262858438598313,
					"parameters": {
						"object": "Projectile"
					}
				}
			],
			"actions": [],
			"sid": 569478695533574,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 727137741413413,
							"disabled": true,
							"parameters": {
								"instance-variable": "health",
								"comparison": 4,
								"value": "0"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 208870508755429,
							"parameters": {
								"instance-variable": "isDead",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [],
					"sid": 327440044645183,
					"children": [
						{
							"eventType": "comment",
							"text": "If player is sleeping: do nothing (projectile continues to move)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-timer-running",
									"objectClass": "Player",
									"sid": 336886656018862,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "TIMER_Player_Sleep"
									}
								}
							],
							"actions": [],
							"sid": 670283054938796
						},
						{
							"eventType": "comment",
							"text": "If player's shield is active: deflect projectile"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 752021953281756
								},
								{
									"id": "is-timer-running",
									"objectClass": "Player",
									"sid": 892420572112907,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "TIMER_Player_Shield"
									}
								}
							],
							"actions": [
								{
									"id": "set-angle-of-motion",
									"objectClass": "Projectile",
									"sid": 779116564188859,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "angle(Player.X, Player.Y, Projectile.X, Projectile.Y)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Projectile",
									"sid": 356138683461619,
									"parameters": {
										"instance-variable": "hasBounced",
										"value": "YES"
									}
								}
							],
							"sid": 839077593046747
						},
						{
							"eventType": "comment",
							"text": "If player is dead: deflect projectile"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 555513040682877
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 147208343690096,
									"parameters": {
										"instance-variable": "isDead",
										"comparison": 0,
										"value": "YES"
									}
								}
							],
							"actions": [
								{
									"id": "set-angle-of-motion",
									"objectClass": "Projectile",
									"sid": 300988555537981,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "angle(Player.X, Player.Y, Projectile.X, Projectile.Y)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Projectile",
									"sid": 391936997257321,
									"parameters": {
										"instance-variable": "hasBounced",
										"value": "YES"
									}
								}
							],
							"sid": 356888609795112
						},
						{
							"eventType": "comment",
							"text": "If player is not sleeping or shielding: destroy projectile & damage player if they are not hurting"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 721809880798259
								},
								{
									"id": "pick-children",
									"objectClass": "Player",
									"sid": 531386692422022,
									"parameters": {
										"child": "bbPlayer",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Projectile",
									"sid": 823025509855134
								}
							],
							"sid": 572460066764052,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-playing",
											"objectClass": "bbPlayer",
											"sid": 372265028265846,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "TWEEN_Player_Hurt"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"customAction": "changeHealth",
											"objectClass": "Player",
											"sid": 938795120851868,
											"parameters": [
												"-Projectile.R_Damage",
												"YES",
												"YES"
											]
										}
									],
									"sid": 731052260718157
								}
							]
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Player + Item"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Player",
					"sid": 887450830041875,
					"parameters": {
						"object": "Item"
					}
				}
			],
			"actions": [],
			"sid": 820446053971430,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Item",
							"sid": 427538744958743,
							"parameters": {
								"instance-variable": "isDestroyed",
								"comparison": 0,
								"value": "NO"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 791776920333829,
							"parameters": {
								"instance-variable": "isDead",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [],
					"sid": 939580578939987,
					"children": [
						{
							"eventType": "comment",
							"text": "A (previously) carried item hits another player"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Item",
									"sid": 237716042960831,
									"parameters": {
										"instance-variable": "lastCarrierPlayerUID",
										"comparison": 1,
										"value": "NOTHING"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Item",
									"sid": 753199089075550,
									"parameters": {
										"instance-variable": "lastCarrierPlayerUID",
										"comparison": 1,
										"value": "Player.UID"
									}
								}
							],
							"actions": [],
							"sid": 511567901558557,
							"children": [
								{
									"eventType": "comment",
									"text": "If the hit player is shielded, deflect item"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-timer-running",
											"objectClass": "Player",
											"sid": 258017708783596,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "TIMER_Player_Shield"
											}
										}
									],
									"actions": [
										{
											"id": "set-angle-of-motion",
											"objectClass": "Item",
											"sid": 695470867380536,
											"behaviorType": "Bullet",
											"parameters": {
												"angle": "angle(Player.X, Player.Y, Item.X, Item.Y)"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Projectile",
											"sid": 705379705439814,
											"parameters": {
												"instance-variable": "hasBounced",
												"value": "YES"
											}
										}
									],
									"sid": 454035181591863
								},
								{
									"eventType": "comment",
									"text": "Otherwise, hit player if they are not sleeping"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 943666374843299
										},
										{
											"id": "is-timer-running",
											"objectClass": "Player",
											"sid": 573825313114064,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "TIMER_Player_Sleep"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"customAction": "onPlayerHit",
											"objectClass": "Item",
											"sid": 491581803011449,
											"parameters": [
												"Player.UID"
											]
										}
									],
									"sid": 559106819719805
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Picking up an item"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 969801749021310
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 844399341665682,
									"parameters": {
										"instance-variable": "carryingItemUID",
										"comparison": 0,
										"value": "NOTHING"
									}
								}
							],
							"actions": [
								{
									"customAction": "carryItem",
									"objectClass": "Player",
									"sid": 925196982345706
								}
							],
							"sid": 768426181869560
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Item + Projectile: deflect projectile"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Item",
					"sid": 972824945446061,
					"parameters": {
						"object": "Projectile"
					}
				}
			],
			"actions": [],
			"sid": 823790296874762,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Item",
							"sid": 952078749089950,
							"parameters": {
								"instance-variable": "isDestroyed",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle-of-motion",
							"objectClass": "Projectile",
							"sid": 395306058698874,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "angle(Item.X, Item.Y, Projectile.X, Projectile.Y)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Projectile",
							"sid": 636259790671523,
							"parameters": {
								"instance-variable": "hasBounced",
								"value": "YES"
							}
						},
						{
							"callFunction": "playSoundAt",
							"sid": 368681710994344,
							"parameters": [
								"Cannon.X",
								"Cannon.Y",
								"SFX_Collision_Item_Projectile",
								"4",
								"NO"
							]
						}
					],
					"sid": 155524659171186
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Cannon + Cannon: invert movement directions"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Cannon",
					"sid": 820556355119597,
					"parameters": {
						"object": "fCannon"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "todo slow down cannons?"
				}
			],
			"sid": 879981744248505,
			"children": [
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-speed",
							"objectClass": "Cannon",
							"sid": 641827555301294,
							"behaviorType": "Orbit",
							"parameters": {
								"speed": "-Self.Orbit.Speed"
							}
						},
						{
							"id": "set-speed",
							"objectClass": "fCannon",
							"sid": 812701003572421,
							"behaviorType": "Orbit",
							"parameters": {
								"speed": "-Self.Orbit.Speed"
							}
						}
					],
					"sid": 222850800031646
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Item + Cannon: damage cannon, destroy item"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Item",
					"sid": 271263119721501,
					"parameters": {
						"object": "Cannon"
					}
				}
			],
			"actions": [],
			"sid": 442998353580713,
			"children": [
				{
					"eventType": "comment",
					"text": "todo_maybe ca?"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Item",
							"sid": 182303237184185,
							"parameters": {
								"instance-variable": "isDestroyed",
								"comparison": 0,
								"value": "NO"
							}
						}
					],
					"actions": [
						{
							"customAction": "remove",
							"objectClass": "Item",
							"sid": 955607682820919,
							"parameters": [
								"YES"
							]
						},
						{
							"customAction": "onHit",
							"objectClass": "Cannon",
							"sid": 768985674448403,
							"parameters": [
								"Item.damage",
								"Item.Bullet.AngleOfMotion"
							]
						}
					],
					"sid": 115262792652881,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-parent",
									"objectClass": "Item",
									"sid": 431754216965517,
									"parameters": {
										"parent": "Player",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 350391710871366,
									"parameters": {
										"instance-variable": "carryingItemUID",
										"value": "NOTHING"
									}
								},
								{
									"id": "remove-from-parent",
									"objectClass": "Item",
									"sid": 234536805433471
								}
							],
							"sid": 806846190674985
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Cannon + Projectile that has bounced: damage cannon, destroy projectile"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Cannon",
					"sid": 759077313466472,
					"parameters": {
						"object": "Projectile"
					}
				}
			],
			"actions": [],
			"sid": 158747799349680,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Projectile",
							"sid": 659696738378574,
							"parameters": {
								"instance-variable": "hasBounced",
								"comparison": 0,
								"value": "YES"
							}
						}
					],
					"actions": [
						{
							"customAction": "onHit",
							"objectClass": "Cannon",
							"sid": 852909509730968,
							"parameters": [
								"Projectile.R_Damage",
								"Projectile.Bullet.AngleOfMotion"
							]
						},
						{
							"id": "destroy",
							"objectClass": "Projectile",
							"sid": 289173567583963
						}
					],
					"sid": 986420137663087
				}
			]
		}
	],
	"sid": 441405412204844
}